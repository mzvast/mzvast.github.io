(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{245:function(n,a,e){"use strict";e.r(a),e.d(a,"readingTime",function(){return p}),e.d(a,"default",function(){return r}),e.d(a,"tableOfContents",function(){return o}),e.d(a,"frontMatter",function(){return i});var s=e(36),t=(e(0),e(35)),p={text:"2 min read",minutes:1.1,time:66e3,words:220},l={},c="wrapper";function r(n){var a=n.components,e=Object(s.a)(n,["components"]);return Object(t.mdx)(c,Object.assign({},l,e,{components:a,mdxType:"MDXLayout"}),Object(t.mdx)("h2",{id:"\u672c\u6587\u6d89\u53ca\u5185\u5bb9"},"\u672c\u6587\u6d89\u53ca\u5185\u5bb9"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},"kcptun\u670d\u52a1\u7aef\u7684\u642d\u5efa"),Object(t.mdx)("li",{parentName:"ul"},"kcptun\u5ba2\u6237\u7aef\u5728\u6811\u8393\u6d3e\u4e0a\u7684\u642d\u5efa"),Object(t.mdx)("li",{parentName:"ul"},"kcptun\u5ba2\u6237\u7aefsystemd\u81ea\u542f\u811a\u672c\u7684\u4f7f\u7528")),Object(t.mdx)("h2",{id:"\u73af\u5883"},"\u73af\u5883"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},"\u642c\u74e6\u5de5512M/centos6"),Object(t.mdx)("li",{parentName:"ul"},"\u6811\u8393\u6d3e3/rasbian-PIXEL")),Object(t.mdx)("h2",{id:"\u670d\u52a1\u7aef"},"\u670d\u52a1\u7aef"),Object(t.mdx)("p",null,"\u63a8\u8350\u8fd9\u6b3e",Object(t.mdx)("a",Object.assign({parentName:"p"},{href:"http://www.jianshu.com/p/78420fad1481"}),"\u4e00\u952e\u5b89\u88c5\u811a\u672c")),Object(t.mdx)("pre",null,Object(t.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token variable">$wget</span> --no-check-certificate https://raw.githubusercontent.com/kuoruan/kcptun_installer/master/kcptun.sh\n<span class="token variable">$chmod</span> +x ./kcptun.sh\n$./kcptun.sh\n'}}))),Object(t.mdx)("p",null,"\u9700\u8981\u914d\u7f6e\u7684\u5185\u5bb9\u4e3b\u8981\u662f\uff1a"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},"\u8bbe\u7f6e Kcptun \u7684\u670d\u52a1\u7aef\u7aef\u53e3"),Object(t.mdx)("li",{parentName:"ul"},"\u8bbe\u7f6e\u52a0\u901f\u7684 IP"),Object(t.mdx)("li",{parentName:"ul"},"\u8bbe\u7f6e\u9700\u8981\u52a0\u901f\u7684\u7aef\u53e3"),Object(t.mdx)("li",{parentName:"ul"},"\u8bbe\u7f6e Kcptun \u5bc6\u7801")),Object(t.mdx)("p",null,"\u5b89\u88c5\u4e4b\u540e\uff0cKcptun\u670d\u52a1\u4ea4\u7531 Supervisor \u7ba1\u7406"),Object(t.mdx)("p",null,"Kcptun \u76f8\u5173\u547d\u4ee4\uff1a"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},"\u670d\u52a1\u542f\u505c\uff1a",Object(t.mdx)("inlineCode",{parentName:"li"},"supervisorctl {start|stop|restart|status} kcptun")),Object(t.mdx)("li",{parentName:"ul"},"\u5982\u9700\u66f4\u65b0\uff1a",Object(t.mdx)("inlineCode",{parentName:"li"},"./kcptun.sh update")),Object(t.mdx)("li",{parentName:"ul"},"\u5982\u9700\u91cd\u65b0\u914d\u7f6e\uff1a",Object(t.mdx)("inlineCode",{parentName:"li"},"./kcptun.sh reconfig")),Object(t.mdx)("li",{parentName:"ul"},"\u5378\u8f7d\uff1a",Object(t.mdx)("inlineCode",{parentName:"li"},"./kcptun.sh uninstall"))),Object(t.mdx)("p",null,"\u6ce8\u610f\uff01\u8981\u628a\u5c4f\u5e55\u8f93\u51fa\u7684json\u5185\u5bb9\u590d\u5236\u4e00\u4e0b\uff0c\u540e\u9762\u4f1a\u7528\u5230\u3002"),Object(t.mdx)("h2",{id:"windows\u5ba2\u6237\u7aef"},"windows\u5ba2\u6237\u7aef"),Object(t.mdx)("p",null,"\u9996\u5148\u8bf4\u8bf4windows\u7684gui\u7a0b\u5e8f\uff0c\u5148\u4e0b\u8f7d\u4e00\u4e2a",Object(t.mdx)("a",Object.assign({parentName:"p"},{href:"https://github.com/dfdragon/kcptun_gclient/releases"}),"\u914d\u7f6ekcptun\u7684\u5de5\u5177"),"\uff0c\u7136\u540e\u4e0b\u8f7d",Object(t.mdx)("a",Object.assign({parentName:"p"},{href:"https://github.com/xtaci/kcptun/releases"}),"kcptun\u4e3b\u7a0b\u5e8f"),"\uff0c\u6253\u5f00\u5de5\u5177\uff0c\u5c06\u5c4f\u5e55\u8f93\u51fa\u7684\u5185\u5bb9\u4ee5json\u5bfc\u5165\u914d\u7f6e\uff0c\u8bbe\u7f6e\u4e0b\u672c\u5730\u7aef\u53e3\uff0c\u542f\u52a8\u5373\u53ef\u3002"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},"\u7279\u522b\u6ce8\u610f\uff01ipv6\u5730\u5740\u5728\u5199\u65f6\u5019\u8981\u52a0",Object(t.mdx)("inlineCode",{parentName:"li"},"[...]"),"\u65b9\u62ec\u53f7")),Object(t.mdx)("h2",{id:"\u6811\u8393\u6d3e\u5ba2\u6237\u7aef"},"\u6811\u8393\u6d3e\u5ba2\u6237\u7aef"),Object(t.mdx)("p",null,"\u4ece\u4e0a\u9762\u7684\u4e3b\u7a0b\u5e8f\u4e2d\u627e\u5230arm_64bit\u7684\u7248\u672c\u4e0b\u8f7d\uff0c\u89e3\u538b\u5230\u4e00\u4e2a\u76ee\u5f55\uff0c\u5047\u5b9a\u4e3akcp\u3002\u7136\u540e\u65b0\u5efa\u4e09\u4e2a\u811a\u672c\uff0c",Object(t.mdx)("inlineCode",{parentName:"p"},"start.sh"),"\uff0c",Object(t.mdx)("inlineCode",{parentName:"p"},"stop.sh"),"\uff0c",Object(t.mdx)("inlineCode",{parentName:"p"},"restart.sh"),"\u3002\n\u5185\u5bb9\u5982\u4e0b\uff1a"),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"start.sh    "),Object(t.mdx)("pre",{parentName:"li"},Object(t.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token shebang important">#!/bin/bash</span>\n./client_linux_arm7 -l :<span class="token operator">&lt;</span> <span class="token builtin class-name">local</span> port <span class="token operator">></span> -r <span class="token operator">&lt;</span> <span class="token function">ip</span> <span class="token operator">></span>:<span class="token operator">&lt;</span> port <span class="token operator">></span> -key <span class="token string">"bromide-tavern-sewer"</span> -crypt aes -datashard <span class="token number">10</span> -parityshard <span class="token number">3</span> -conn <span class="token number">1</span> -mtu <span class="token number">1350</span> -sndwnd <span class="token number">1024</span> -rcvwnd <span class="token number">1024</span> -dscp <span class="token number">0</span> -autoexpire <span class="token number">60</span> -keepalive <span class="token number">10</span> -sockbuf <span class="token number">4194304</span> -mode fast <span class="token operator">></span> kcptun.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>\n<span class="token builtin class-name">echo</span> <span class="token string">"Kcptun started."</span>\n'}})))),Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"stop.sh"),Object(t.mdx)("pre",{parentName:"li"},Object(t.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token shebang important">#!/bin/bash</span>\n<span class="token builtin class-name">echo</span> <span class="token string">"Stopping Kcptun..."</span>\n<span class="token assign-left variable">PID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> client_linux_arm7 <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">\'{print <span class="token variable">$2</span>}\'</span><span class="token variable">`</span></span>\n<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">""</span> <span class="token operator">!=</span>  <span class="token string">"<span class="token variable">$PID</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n  <span class="token builtin class-name">echo</span> <span class="token string">"killing <span class="token variable">$PID</span>"</span>\n  <span class="token function">kill</span> -9 <span class="token variable">$PID</span>\n<span class="token keyword">fi</span>\n<span class="token builtin class-name">echo</span> <span class="token string">"Kcptun stoped."</span>\n'}})))),Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"restart.sh"),Object(t.mdx)("pre",{parentName:"li"},Object(t.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token shebang important">#!/bin/bash</span>\n<span class="token builtin class-name">cd</span> /root/kcptun/\n<span class="token function">sh</span> client-stop.sh\n<span class="token builtin class-name">echo</span> <span class="token string">"Restarting Kcptun..."</span>\n<span class="token function">sh</span> client-start.sh\n'}}))))),Object(t.mdx)("h2",{id:"systemd\u81ea\u542f\u670d\u52a1\u811a\u672c"},"systemd\u81ea\u542f\u670d\u52a1\u811a\u672c"),Object(t.mdx)("p",null,"\u624b\u52a8\u542f\u52a8\u670d\u52a1\u603b\u4e0d\u662f\u4e2a\u597d\u529e\u6cd5\uff0c\u6bd5\u7adf\u91cd\u542f\u5c31\u5f97\u624b\u52a8\u8fd0\u884c\u4e00\u904d\uff0c\u5b9e\u5728\u65e0\u804a\u3002  "),Object(t.mdx)("ul",null,Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6/etc/systemd/system/kcptun.service\u5185\u5bb9\u5982\u4e0b"),Object(t.mdx)("pre",{parentName:"li"},Object(t.mdx)("code",Object.assign({parentName:"pre"},{className:"language-shell","data-language":"shell","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>\n<span class="token assign-left variable">Description</span><span class="token operator">=</span>Kcptun Client Service\n<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target\n<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>\n<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple\n<span class="token assign-left variable">User</span><span class="token operator">=</span>nobody\n<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span><span class="token operator">&lt;</span> \u4e0a\u9762\u7684start.sh\u7684\u4e3b\u4f53\u90e8\u5206<span class="token punctuation">(</span>\u53bb\u6389shebang\u884c<span class="token punctuation">)</span>\u7c98\u8d34\u8fc7\u6765\u5373\u53ef <span class="token operator">></span>\n<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>\n<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>default.target\n'}})))),Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"\u589e\u52a0\u53ef\u6267\u884c\u6743\u9650",Object(t.mdx)("br",{parentName:"p"}),"\n",Object(t.mdx)("inlineCode",{parentName:"p"},"sudo chmod +x  /etc/systemd/system/kcptun.service"))),Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"\u6d4b\u8bd5\u8fd0\u884c",Object(t.mdx)("br",{parentName:"p"}),"\n",Object(t.mdx)("inlineCode",{parentName:"p"},"sudo systemctl start kcptun.service"))),Object(t.mdx)("li",{parentName:"ul"},Object(t.mdx)("p",{parentName:"li"},"\u542f\u7528\u670d\u52a1",Object(t.mdx)("br",{parentName:"p"}),"\n",Object(t.mdx)("inlineCode",{parentName:"p"},"sudo systemctl daemon-reload && sudo systemctl enable kcptun.service")))),Object(t.mdx)("h2",{id:"\u4fee\u8ba2\u8bf4\u660e"},"\u4fee\u8ba2\u8bf4\u660e"),Object(t.mdx)("hr",null),Object(t.mdx)("table",null,Object(t.mdx)("thead",{parentName:"table"},Object(t.mdx)("tr",{parentName:"thead"},Object(t.mdx)("th",Object.assign({parentName:"tr"},{align:"left"}),"\u65f6\u95f4"),Object(t.mdx)("th",Object.assign({parentName:"tr"},{align:"left"}),"\u8bf4\u660e"))),Object(t.mdx)("tbody",{parentName:"table"},Object(t.mdx)("tr",{parentName:"tbody"},Object(t.mdx)("td",Object.assign({parentName:"tr"},{align:"left"}),"2016\u201311\u201323"),Object(t.mdx)("td",Object.assign({parentName:"tr"},{align:"left"}),"\u589e\u52a0systemd\u81ea\u542f\u811a\u672c")))))}r.isMDXComponent=!0;var o=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"\u672c\u6587\u6d89\u53ca\u5185\u5bb9",level:2,title:"\u672c\u6587\u6d89\u53ca\u5185\u5bb9",children:[]},{id:"\u73af\u5883",level:2,title:"\u73af\u5883",children:[]},{id:"\u670d\u52a1\u7aef",level:2,title:"\u670d\u52a1\u7aef",children:[]},{id:"windows\u5ba2\u6237\u7aef",level:2,title:"windows\u5ba2\u6237\u7aef",children:[]},{id:"\u6811\u8393\u6d3e\u5ba2\u6237\u7aef",level:2,title:"\u6811\u8393\u6d3e\u5ba2\u6237\u7aef",children:[]},{id:"systemd\u81ea\u542f\u670d\u52a1\u811a\u672c",level:2,title:"systemd\u81ea\u542f\u670d\u52a1\u811a\u672c",children:[]},{id:"\u4fee\u8ba2\u8bf4\u660e",level:2,title:"\u4fee\u8ba2\u8bf4\u660e",children:[]}]},i={}}}]);
//# sourceMappingURL=93.8fdd84bf.chunk.js.map