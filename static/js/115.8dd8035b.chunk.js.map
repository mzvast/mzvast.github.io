{"version":3,"sources":["routes/posts/2020/07/08-theme-switch/document.mdx"],"names":["readingTime","text","minutes","time","words","layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_home_runner_work_mzvast_github_io_mzvast_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_2__","assign","mdxType","id","parentName","href","className","data-language","data-highlighted-line-numbers","dangerouslySetInnerHTML","__html","isMDXComponent","tableOfContents","arguments","length","undefined","level","title","children","frontMatter"],"mappings":"sSAGaA,EAAc,CAACC,KAAO,aAAaC,QAAU,KAAMC,KAAO,MAAMC,MAAQ,KAS/EC,EAAc,GAGdC,EAAY,UACH,SAASC,EAATC,GAGZ,IAFDC,EAECD,EAFDC,WACGC,EACFC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,gBACD,OAAOG,OAAAE,EAAA,IAAAF,CAACL,EAADK,OAAAG,OAAA,GAAeT,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYM,QAAQ,cAC5EJ,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,0DADR,0DAGAL,OAAAE,EAAA,IAAAF,CAAA,UACEA,OAAAE,EAAA,IAAAF,CAAA,MAAIM,WAAW,MAAf,sDAEFN,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,gBADR,gBAGAL,OAAAE,EAAA,IAAAF,CAAA,gJAA6BA,OAAAE,EAAA,IAAAF,CAAA,IAAAA,OAAAG,OAAA,CAAGG,WAAW,KAAQ,CAC/CC,KAAQ,mJADiB,4BAA7B,8HAGAP,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,uBADR,uBAGAL,OAAAE,EAAA,IAAAF,CAAA,+HACAA,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,wBADR,yBAGAL,OAAAE,EAAA,IAAAF,CAAA,yKACAA,OAAAE,EAAA,IAAAF,CAAA,+EACAA,OAAAE,EAAA,IAAAF,CAAA,WAAKA,OAAAE,EAAA,IAAAF,CAAA,OAAAA,OAAAG,OAAA,CAAMG,WAAW,OAAU,CAC5BE,UAAa,sBACbC,gBAAiB,aACjBC,gCAAiC,GACjCC,wBAA2B,CACzBC,OAAU,8kDAGhBZ,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,+CADR,+CAGAL,OAAAE,EAAA,IAAAF,CAAA,+IACAA,OAAAE,EAAA,IAAAF,CAAA,KAAQ,CACNK,GAAM,uBADR,uBAGAL,OAAAE,EAAA,IAAAF,CAAA,4PACAA,OAAAE,EAAA,IAAAF,CAAA,2GACAA,OAAAE,EAAA,IAAAF,CAAA,WAAKA,OAAAE,EAAA,IAAAF,CAAA,OAAAA,OAAAG,OAAA,CAAMG,WAAW,OAAU,CAC5BE,UAAa,eACbC,gBAAiB,MACjBC,gCAAiC,GACjCC,wBAA2B,CACzBC,OAAU,u4EAGhBZ,OAAAE,EAAA,IAAAF,CAAA,WAAKA,OAAAE,EAAA,IAAAF,CAAA,OAAAA,OAAAG,OAAA,CAAMG,WAAW,OAAU,CAC5BE,UAAa,sBACbC,gBAAiB,aACjBC,gCAAiC,GACjCC,wBAA2B,CACzBC,OAAU,84GAOpBhB,EAAWiB,gBAAiB,EACrB,IAAMC,EAAkB,WAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,SAAmB,CAChD,CACEV,GAAI,yDACJa,MAAO,EACPC,MAAO,yDACPC,SAAU,IAId,CACIf,GAAI,eACJa,MAAO,EACPC,MAAO,eACPC,SAAU,IAId,CACIf,GAAI,sBACJa,MAAO,EACPC,MAAO,sBACPC,SAAU,CACN,CACMf,GAAI,uBACJa,MAAO,EACPC,MAAO,wBACPC,SAAU,IAIlB,CACQf,GAAI,8CACJa,MAAO,EACPC,MAAO,8CACPC,SAAU,IAIlB,CACQf,GAAI,sBACJa,MAAO,EACPC,MAAO,sBACPC,SAAU,QAQXC,EAAc","file":"static/js/115.8dd8035b.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"1 min read\",\"minutes\":0.645,\"time\":38700,\"words\":129}\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"你可以从本文了解到\"\n    }}>{`你可以从本文了解到`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`夜间模式/主题切换`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"缘起\"\n    }}>{`缘起`}</h2>\n    <p>{`之所以想起“夜间模式”这个主题，是因为看到了`}<a parentName=\"p\" {...{\n        \"href\": \"https://dev.to/mohammadfarmaan/the-best-way-to-dark-mode-your-website-1g7f?utm_source=digest_mailer&utm_medium=email&utm_campaign=digest_email\"\n      }}>{`这篇文章`}</a>{`，而且这个主题已经躺在我的todoList里面很久了。`}</p>\n    <h2 {...{\n      \"id\": \"n种方式\"\n    }}>{`N种方式`}</h2>\n    <p>{`我梳理了一下主要有以下几种主题切换方式`}</p>\n    <h3 {...{\n      \"id\": \"linkhref切换\"\n    }}>{`link.href切换`}</h3>\n    <p>{`适用场景：没有采用预编译，样式可以通过文件级别隔离。`}</p>\n    <p>{`例如上面文章中的示例：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\",\n        \"data-language\": \"javascript\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">switchSheet</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> theme <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"theme\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>theme<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getAttribute</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"href\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">==</span> <span class=\\\"token string\\\">\\\"light-mode.css\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    theme<span class=\\\"token punctuation\\\">.</span>href <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"dark-mode.css\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    theme<span class=\\\"token punctuation\\\">.</span>href <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"light-mode.css\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"\n        }\n      }}></code></pre>\n    <h3 {...{\n      \"id\": \"styled-components-themeprovider切换\"\n    }}>{`styled-components ThemeProvider切换`}</h3>\n    <p>{`适用场景：工程基于styled-components，样式采用全局theme值。`}</p>\n    <h3 {...{\n      \"id\": \"css-var切换\"\n    }}>{`CSS var切换`}</h3>\n    <p>{`适用场景：基于css module或者SCSS之类，样式可以采用全局定义的css variable，通过切换body的class进行切换。`}</p>\n    <p>{`以本blog工程的改造为例，示例如下：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-css\",\n        \"data-language\": \"css\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">/* index.module.css */</span>\\n<span class=\\\"token selector\\\">:global body.light</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">--bg</span><span class=\\\"token punctuation\\\">:</span> #fff<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">--textNormal</span><span class=\\\"token punctuation\\\">:</span> #222<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">--textTitle</span><span class=\\\"token punctuation\\\">:</span> black<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token selector\\\">:global body.dark</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">--bg</span><span class=\\\"token punctuation\\\">:</span> #282c35<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">--textNormal</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">hsla</span><span class=\\\"token punctuation\\\">(</span>0<span class=\\\"token punctuation\\\">,</span>0%<span class=\\\"token punctuation\\\">,</span>100%<span class=\\\"token punctuation\\\">,</span>0.88<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">--textTitle</span><span class=\\\"token punctuation\\\">:</span> #fff<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">--primary-color</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">rgb</span><span class=\\\"token punctuation\\\">(</span>255<span class=\\\"token punctuation\\\">,</span> 167<span class=\\\"token punctuation\\\">,</span> 196<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token selector\\\">:global body</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"token comment\\\">/* ... */</span>\\n  <span class=\\\"token property\\\">background-color</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">var</span><span class=\\\"token punctuation\\\">(</span>--bg<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">color</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">var</span><span class=\\\"token punctuation\\\">(</span>--textNormal<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"\n        }\n      }}></code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\",\n        \"data-language\": \"typescript\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">ThemeService</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">constructor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token comment\\\">// app挂载时读取并应用上次的theme</span>\\n    <span class=\\\"token function\\\">syncTheme</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">const</span> theme <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getTheme</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        document<span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setAttribute</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'class'</span><span class=\\\"token punctuation\\\">,</span> theme<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token comment\\\">// 设定theme并持久化</span>\\n    <span class=\\\"token function\\\">setTheme</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">theme</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'theme'</span><span class=\\\"token punctuation\\\">,</span> theme<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        document<span class=\\\"token punctuation\\\">.</span>body<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setAttribute</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'class'</span><span class=\\\"token punctuation\\\">,</span> theme<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token comment\\\">// 读取定制的theme，给默认值light</span>\\n    <span class=\\\"token function\\\">getTheme</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'theme'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token string\\\">'light'</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">ThemeService</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"你可以从本文了解到\",\n    level: 2,\n    title: \"你可以从本文了解到\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"缘起\",\n    level: 2,\n    title: \"缘起\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"n种方式\",\n    level: 2,\n    title: \"N种方式\",\n    children: [\n        {\n              id: \"linkhref切换\",\n              level: 3,\n              title: \"link.href切换\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"styled-components-themeprovider切换\",\n              level: 3,\n              title: \"styled-components ThemeProvider切换\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"css-var切换\",\n              level: 3,\n              title: \"CSS var切换\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n"],"sourceRoot":""}