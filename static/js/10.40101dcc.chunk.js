(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{188:function(n,s,a){"use strict";a.r(s),a.d(s,"readingTime",function(){return c}),a.d(s,"default",function(){return r}),a.d(s,"tableOfContents",function(){return i}),a.d(s,"frontMatter",function(){return k});var t=a(32),p=(a(0),a(44)),o=a(189),e=a.n(o),c={text:"2 min read",minutes:1.335,time:80100,words:267},l={},u="wrapper";function r(n){var s=n.components,a=Object(t.a)(n,["components"]);return Object(p.b)(u,Object.assign({},l,a,{components:s,mdxType:"MDXLayout"}),Object(p.b)("p",null,"\u672c\u6587\u662f",Object(p.b)("a",Object.assign({parentName:"p"},{href:"../2019-07-29-start-loving-change"}),"\u586b\u5751\u4e4b\u4f5c")),Object(p.b)("h2",{id:"\u6b65\u9aa4\u6982\u8ff0"},"\u6b65\u9aa4\u6982\u8ff0"),Object(p.b)("ol",null,Object(p.b)("li",{parentName:"ol"},"\u6ce8\u518c",Object(p.b)("a",Object.assign({parentName:"li"},{href:"https://disqus.com/"}),"Disqus \u8d26\u53f7"),"\uff0c\u65b0\u5efa\u4e00\u4e2a site\u3002"),Object(p.b)("li",{parentName:"ol"},"React \u5de5\u7a0b\u5b89\u88c5",Object(p.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/disqus/disqus-react"}),"disqus-react"),"\u7ec4\u4ef6\uff0c\u914d\u7f6e\u7ec4\u4ef6\u3002")),Object(p.b)("h2",{id:"\u6ce8\u518c\u8d26\u53f7"},"\u6ce8\u518c\u8d26\u53f7"),Object(p.b)("p",null,"\u6ce8\u518c\u7684\u8fc7\u7a0b\u5c31\u4e0d\u8be6\u7ec6\u8bf4\u4e86\uff0c\u5c31\u662f\u6ce8\u518c\u5b8c\u4e86\u4e4b\u540e\u8981\u53bb\u5bf9\u5e94 site \u8bbe\u5b9a",Object(p.b)("inlineCode",{parentName:"p"},"Website URL"),"\u5b57\u6bb5"),Object(p.b)("p",null,"\u8bbe\u7f6e\u83dc\u5355\u7684\u8def\u5f84\u4f4d\u4e8e"),Object(p.b)("p",null,Object(p.b)("inlineCode",{parentName:"p"},"https://[\u4f60\u7684siteShortname].disqus.com/admin/settings/general/")),Object(p.b)("img",{src:e.a,style:{width:"100%"}}),Object(p.b)("h2",{id:"\u5b89\u88c5\u548c\u914d\u7f6e-disqus-react"},"\u5b89\u88c5\u548c\u914d\u7f6e disqus-react"),Object(p.b)("p",null,"\u7528 yarn \u5b89\u88c5\u4f9d\u8d56"),Object(p.b)("pre",null,Object(p.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token function">yarn</span> <span class="token function">add</span> disqus-react\n'}}))),Object(p.b)("p",null,"\u7136\u540e\u914d\u7f6e\u9875\u9762\u7ec4\u4ef6\uff0c\u672c\u5de5\u7a0b\u4e3a\u4f8b\uff0c\u9875\u9762\u7ec4\u4ef6\u5728",Object(p.b)("inlineCode",{parentName:"p"},"src/components/BlogPostLayout.tsx"),"\n\u91cd\u70b9\u662f",Object(p.b)("inlineCode",{parentName:"p"},"NEW_CODE"),"\u6807\u8bb0\u7684"),Object(p.b)("pre",null,Object(p.b)("code",Object.assign({parentName:"pre"},{className:"language-typescript","data-language":"typescript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span>Link<span class="token punctuation">,</span> useCurrentRoute<span class="token punctuation">,</span> useView<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-navi\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span>MDXProvider<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@mdx-js/react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> siteMetadata <span class="token keyword">from</span> <span class="token string">\'../siteMetadata\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> ArticleMeta <span class="token keyword">from</span> <span class="token string">\'./ArticleMeta\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Bio <span class="token keyword">from</span> <span class="token string">\'./Bio\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">\'./BlogPostLayout.module.css\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Disqus <span class="token keyword">from</span> <span class="token string">\'disqus-react\'</span><span class="token punctuation">;</span> <span class="token comment">// NEW_CODE</span>\n\n<span class="token keyword">interface</span> <span class="token class-name">BlogPostLayoutProps</span> <span class="token punctuation">{</span>\n    blogRoot<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">BlogPostLayout</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>blogRoot<span class="token punctuation">}</span><span class="token punctuation">:</span> BlogPostLayoutProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> data<span class="token punctuation">,</span> url<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCurrentRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token punctuation">{</span>connect<span class="token punctuation">,</span> content<span class="token punctuation">,</span> head<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> <span class="token punctuation">{</span>MDXComponent<span class="token punctuation">,</span> readingTime<span class="token punctuation">}</span> <span class="token operator">=</span> content<span class="token punctuation">;</span>\n    <span class="token comment">/* NEW_CODE start */</span>\n    <span class="token keyword">const</span> disqusShortname <span class="token operator">=</span> <span class="token string">\'miaocode\'</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> disqusConfig<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n        url<span class="token punctuation">:</span> <span class="token string">\'https://mzvast.github.io\'</span> <span class="token operator">+</span> url<span class="token punctuation">.</span>pathname<span class="token punctuation">,</span>\n        identifier<span class="token punctuation">:</span> data<span class="token punctuation">.</span>slug<span class="token punctuation">,</span>\n        title<span class="token punctuation">:</span> title\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token comment">/* NEW_CODE end */</span>\n    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'useCurrentRoute::title, data, url\'</span><span class="token punctuation">,</span> title<span class="token punctuation">,</span> data<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// The content for posts is an MDX component, so we\'ll need</span>\n    <span class="token comment">// to use &lt;MDXProvider> to ensure that links are rendered</span>\n    <span class="token comment">// with &lt;Link>, and thus use pushState.</span>\n    <span class="token keyword">return</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n        <span class="token operator">&lt;</span><span class="token operator">></span>\n            <span class="token punctuation">{</span>head<span class="token punctuation">}</span>\n            <span class="token operator">&lt;</span>article className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">></span>\n                <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>header<span class="token punctuation">}</span><span class="token operator">></span>\n                    <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span>\n                        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">.</span>pathname<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>\n                    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>\n                    <span class="token operator">&lt;</span>ArticleMeta\n                        blogRoot<span class="token operator">=</span><span class="token punctuation">{</span>blogRoot<span class="token punctuation">}</span>\n                        data<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span>\n                        readingTime<span class="token operator">=</span><span class="token punctuation">{</span>readingTime<span class="token punctuation">}</span>\n                    <span class="token operator">/</span><span class="token operator">></span>\n                <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span>\n                <span class="token operator">&lt;</span>MDXProvider\n                    components<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n                        a<span class="token punctuation">:</span> Link<span class="token punctuation">,</span>\n                        <span class="token function-variable function">wrapper</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n                            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n                        <span class="token punctuation">)</span>\n                    <span class="token punctuation">}</span><span class="token punctuation">}</span>\n                <span class="token operator">></span>\n                    <span class="token operator">&lt;</span>MDXComponent <span class="token operator">/</span><span class="token operator">></span>\n                <span class="token operator">&lt;</span><span class="token operator">/</span>MDXProvider<span class="token operator">></span>\n                <span class="token punctuation">{</span><span class="token comment">/* NEW_CODE start\n                 */</span><span class="token punctuation">}</span>\n                <span class="token operator">&lt;</span>Disqus<span class="token punctuation">.</span>DiscussionEmbed\n                    shortname<span class="token operator">=</span><span class="token punctuation">{</span>disqusShortname<span class="token punctuation">}</span>\n                    config<span class="token operator">=</span><span class="token punctuation">{</span>disqusConfig<span class="token punctuation">}</span>\n                <span class="token operator">/</span><span class="token operator">></span>\n                <span class="token punctuation">{</span><span class="token comment">/* NEW_CODE end\n                 */</span><span class="token punctuation">}</span>\n                <span class="token operator">&lt;</span>footer className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>footer<span class="token punctuation">}</span><span class="token operator">></span>\n                    <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">></span>\n                        <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token punctuation">{</span>blogRoot<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>siteMetadata<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>\n                    <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>\n                    <span class="token operator">&lt;</span>Bio className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>bio<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n                    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>links<span class="token punctuation">}</span><span class="token operator">></span>\n                        <span class="token punctuation">{</span>data<span class="token punctuation">.</span>previousDetails <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n                            <span class="token operator">&lt;</span>Link\n                                className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>previous<span class="token punctuation">}</span>\n                                href<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>previousDetails<span class="token punctuation">.</span>href<span class="token punctuation">}</span>\n                            <span class="token operator">></span>\n                                \u2190 <span class="token punctuation">{</span>data<span class="token punctuation">.</span>previousDetails<span class="token punctuation">.</span>title<span class="token punctuation">}</span>\n                            <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>\n                        <span class="token punctuation">)</span><span class="token punctuation">}</span>\n                        <span class="token punctuation">{</span>data<span class="token punctuation">.</span>nextDetails <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n                            <span class="token operator">&lt;</span>Link\n                                className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>next<span class="token punctuation">}</span>\n                                href<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>nextDetails<span class="token punctuation">.</span>href<span class="token punctuation">}</span>\n                            <span class="token operator">></span>\n                                <span class="token punctuation">{</span>data<span class="token punctuation">.</span>nextDetails<span class="token punctuation">.</span>title<span class="token punctuation">}</span> \u2192\n                            <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>\n                        <span class="token punctuation">)</span><span class="token punctuation">}</span>\n                    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>\n                <span class="token operator">&lt;</span><span class="token operator">/</span>footer<span class="token operator">></span>\n            <span class="token operator">&lt;</span><span class="token operator">/</span>article<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPostLayout<span class="token punctuation">;</span>\n'}}))),Object(p.b)("p",null,"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cdisqusConfig \u7684\u8bbe\u7f6e\uff0c\u5176\u4e2d url \u5fc5\u987b\u8ddf\u6b65\u9aa4 1 \u4e2d\u914d\u7f6e\u7684\u76f8\u5339\u914d\uff0c\u800c identifier \u53ea\u8981\u4fdd\u8bc1\u6587\u7ae0\u4e4b\u95f4\u552f\u4e00\u5373\u53ef\u3002"),Object(p.b)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),Object(p.b)("p",null,"mdx\u548cReact\u5929\u751f\u4e00\u5bf9\uff0c\u76f8\u4fe1\u5728disqus\u7b49\u751f\u6001\u7684\u52a0\u6301\u4e0b\uff0c\u4f1a\u7efd\u653e\u51fa\u66f4\u5f3a\u7684\u751f\u547d\u529b\u3002"))}r.isMDXComponent=!0;var i=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"\u6b65\u9aa4\u6982\u8ff0",level:2,title:"\u6b65\u9aa4\u6982\u8ff0",children:[]},{id:"\u6ce8\u518c\u8d26\u53f7",level:2,title:"\u6ce8\u518c\u8d26\u53f7",children:[]},{id:"\u5b89\u88c5\u548c\u914d\u7f6e-disqus-react",level:2,title:"\u5b89\u88c5\u548c\u914d\u7f6e disqus-react",children:[]},{id:"\u603b\u7ed3",level:2,title:"\u603b\u7ed3",children:[]}]},k={}},189:function(n,s,a){n.exports=a.p+"static/media/screen.ae14f2ff.png"}}]);
//# sourceMappingURL=10.40101dcc.chunk.js.map