{"version":3,"sources":["routes/posts/2020/10/17-2313-official-project-review/document.mdx"],"names":["readingTime","text","minutes","time","words","layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_home_runner_work_mzvast_github_io_mzvast_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_2__","assign","mdxType","id","parentName","href","className","data-language","data-highlighted-line-numbers","dangerouslySetInnerHTML","__html","isMDXComponent","tableOfContents","arguments","length","undefined","level","title","children","frontMatter"],"mappings":"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","file":"static/js/122.9c3e5f56.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"5 min read\",\"minutes\":4.59,\"time\":275400,\"words\":918}\n/* @jsx mdx */\n\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <h2 {...{\n      \"id\": \"帧动画闪烁和浏览器兼容性\"\n    }}>{`帧动画闪烁和浏览器兼容性`}</h2>\n    <p>{`分为规则闪烁和不规则闪烁两种。`}</p>\n    <p>{`1.规则闪烁`}</p>\n    <p>{`规则闪烁在不同浏览器表现不一样。chrome、ie、edge 各自有各自的问题。`}</p>\n    <p>{`1、图片删除、插入式的动画方式，在 ie11 上会闪烁。`}</p>\n    <p>{`2、替换图片 src 的动画方式，在 edge 上会闪烁。`}</p>\n    <p>{`3、替换背景图也在 chrome 有不同程度的问题。`}</p>\n    <p>{`摸索下来，选择了方案 2，然后在 edge 上做试验，寻找引起闪烁的原因尝试修复。\n目前没有严格准确的结论，但对图片`}<inlineCode parentName=\"p\">{`压缩尺寸`}</inlineCode>{`后，闪烁就消失了（`}<inlineCode parentName=\"p\">{`png压缩后损失alpha通道，丢失透明度`}</inlineCode>{`）。初步结论 edge 渲染效能有问题。`}</p>\n    <p>{`2.不规则闪烁`}</p>\n    <p>{`与浏览器无关，都会发生。在刷新页面或者切页面时容易出现，主要原因是“重入”。`}</p>\n    <h2 {...{\n      \"id\": \"webpack-与调试-es5\"\n    }}>{`webpack 与调试 es5`}</h2>\n    <p>{`参考`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/jaredpalmer/razzle/issues/998#issuecomment-576892323\"\n      }}>{`本文`}</a>{`，通过修改 webpack 的 dev server 配置，使得client使用webpack/hot/dev-server，可以实时编译成 es5 给 IE 调试。 提高了调试效率，尤其是IE11。`}</p>\n    <p>{`问：`}<inlineCode parentName=\"p\">{`webpack/hot/dev-server`}</inlineCode>{`怎么知道该编译成 es5？`}</p>\n    <p>{`答：基于package.json的`}<inlineCode parentName=\"p\">{`browserslist配置`}</inlineCode>{`。`}</p>\n    <p>{`源码对应的位置：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">// node_modules/razzle/config/createConfig.js</span>\\n<span class=\\\"token comment\\\">// line 381</span>\\nconfig<span class=\\\"token punctuation\\\">.</span>entry <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    client<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n<span class=\\\"highlighted-line\\\">        require<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'razzle-dev-utils/webpackHotDevClient'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span></span><span class=\\\"highlighted-line\\\">        <span class=\\\"token comment\\\">// 将上面这行替换成require.resolve('webpack/hot/dev-server')</span></span>        paths<span class=\\\"token punctuation\\\">.</span>appClientIndexJs\\n    <span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`具体步骤：`}</p>\n    <p>{`1.razzle配置化修改`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">// razzle.config.js</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    plugins<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n        <span class=\\\"token punctuation\\\">{</span>\\n            name<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'typescript'</span><span class=\\\"token punctuation\\\">,</span>\\n            options<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                useBabel<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n                tsLoader<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                    transpileOnly<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n                    experimentalWatchApi<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n                <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n                forkTsChecker<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                    tsconfig<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'./tsconfig.json'</span><span class=\\\"token punctuation\\\">,</span>\\n                    tslint<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n                    watch<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'./src'</span><span class=\\\"token punctuation\\\">,</span>\\n                    typeCheck<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n                <span class=\\\"token punctuation\\\">}</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"highlighted-line\\\">    <span class=\\\"token function-variable function\\\">modify</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">config<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>target<span class=\\\"token punctuation\\\">,</span> dev<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span></span><span class=\\\"highlighted-line\\\">        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>dev <span class=\\\"token operator\\\">&amp;&amp;</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">ECMA</span> <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">'5'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span></span><span class=\\\"highlighted-line\\\">            <span class=\\\"token comment\\\">// 这里ECMA是环境变量控制的功能开关</span></span><span class=\\\"highlighted-line\\\">            config<span class=\\\"token punctuation\\\">.</span>entry<span class=\\\"token punctuation\\\">.</span>client<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> require<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'webpack/hot/dev-server'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"highlighted-line\\\">        <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"highlighted-line\\\"></span><span class=\\\"highlighted-line\\\">        <span class=\\\"token keyword\\\">return</span> config<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"highlighted-line\\\">    <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`2.增加带功能开关的脚本，配置正确的browserslist。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\",\n        \"data-language\": \"json\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">// package.json</span>\\n<span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"cra-ts-ssr-zero\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"version\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"1.0.0\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"license\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"MIT\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"scripts\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">\\\"new:component\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"hygen component new\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">\\\"new:page\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"hygen page new\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token property\\\">\\\"start\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"PUBLIC_PATH=./ CLIENT_PUBLIC_PATH=/ razzle start --type=spa\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"highlighted-line\\\">        <span class=\\\"token property\\\">\\\"start:es5\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"PUBLIC_PATH=./ CLIENT_PUBLIC_PATH=/ ECMA=5 razzle start --type=spa\\\"</span><span class=\\\"token punctuation\\\">,</span></span>        <span class=\\\"token property\\\">\\\"build\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"PUBLIC_PATH=./ razzle build --type=spa\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token property\\\">\\\"browserslist\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n        <span class=\\\"token string\\\">\\\">0.2%\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"not dead\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"not ie &lt;= 11\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"not op_mini all\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"chrome >=51\\\"</span>\\n    <span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"\n        }\n      }}></code></pre>\n    <h2 {...{\n      \"id\": \"ie11-css兼容性相关\"\n    }}>{`IE11 CSS兼容性相关`}</h2>\n    <p>{`在做布局的时候用了Grid，ie11不支持，只能转成Flex布局。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\",\n        \"data-language\": \"tsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">const</span> GridContainer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> styled<span class=\\\"token punctuation\\\">.</span>div<span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    // grid-template-columns: 300px 300px 300px;\\n    // grid-template-rows: 200px 200px 200px;\\n    // grid-column-gap: 20px;\\n    // grid-row-gap: 20px;\\n    display: flex;\\n    flex-wrap: wrap;\\n    max-width: 940px;\\n    justify-content: space-between;\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> Card<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">styled</span><span class=\\\"token punctuation\\\">(</span>Box<span class=\\\"token punctuation\\\">)</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token punctuation\\\">{</span>bg<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    width: 300px; // ++\\n    height: 200px; // ++\\n    position: relative;\\n    background: url(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span>bg<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> bg<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">) no-repeat center;\\n    border-radius: 3px;\\n    overflow: hidden;\\n    :not(:nth-child(-n + 3)) { // ++\\n        margin-top: 20px; // ++\\n    } // ++\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`关于IE样式的大部分问题，通常可以尝试显式指定宽高。`}</p>\n    <h2 {...{\n      \"id\": \"百度云缓存\"\n    }}>{`百度云缓存`}</h2>\n    <p>{`bos 和 cdn 资源默认配置了 3 天的强缓存。导致资源更新不能及时生效，建议配置更短的强缓存时间，避免同名资源替换生效时间过长。`}</p>\n    <h2 {...{\n      \"id\": \"png-压缩\"\n    }}>{`PNG 压缩`}</h2>\n    <p>{`png 在百度云图像处理压缩后会丢失 alpha 通道，导致一些有部分透明的主色为白的图片变成全白。因此尽量避免压缩 png，只有在背景不是透明的情况下才是相对安全的。`}</p>\n    <h2 {...{\n      \"id\": \"unicode-文本编码\"\n    }}>{`unicode 文本编码`}</h2>\n    <p>{`在走查视觉的时候会发现一行字中有两种不同的字体。但看源码中文本并没有什么字体差别。其实文案中存在两种不同范围的 unicode 编码。`}<a parentName=\"p\" {...{\n        \"href\": \"https://blog.csdn.net/gstianfu/article/details/84643320\"\n      }}>{`参见`}</a></p>\n    <p>{`其中用于`}<inlineCode parentName=\"p\">{`部首`}</inlineCode>{`的 unicode，编码范围是从 U+2F00 到 U+2FD5。`}</p>\n    <p>{`另一种用于`}<inlineCode parentName=\"p\">{`常用汉字`}</inlineCode>{`的编码范围是 U+4E00 到 U+9FFF。`}</p>\n    <p>{`显示字体不同原因：在某些 win10 机器的“雅黑”字库中常用汉字字体有映射，另部首则没有，故采用回落字体（等线）显示。`}</p>\n    <p>{`问题产生原因猜测：文案编写者采用的输入法有问题，未按照常用汉字的规范化编码。`}</p>\n    <p>{`目前 unicode 有：NFD（默认）、NFC、NFKD、NFKC 四种规范化形式。英文和一些部首采用 NFD、NFC，而常用汉字采用 NFKD、NFKC 形式。`}</p>\n    <p>{`解决思路：将部首转换到常用汉字编码范围。比如都转换成 NFKD。`}</p>\n    <p>{`ES6 中提供了工具函数`}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\"\n      }}>{`String.prototype.normalize()`}</a>{`，可以传入参数`}<inlineCode parentName=\"p\">{`\"NFKD\"`}</inlineCode>{`。`}</p>\n    <h2 {...{\n      \"id\": \"帧动画实现\"\n    }}>{`帧动画实现`}</h2>\n    <p>{`可改进的点：减少图片请求数量、采用RAF替代 setTimeout、从可见性方面节能。`}</p>\n    <p>{`代码如下：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\",\n        \"data-language\": \"tsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">/**\\n * @file [FrameAnimate]\\n * @author [mzvast]\\n * @email [mzvast@gmail.com]\\n * @create date 2020-10-10 17:40:42\\n */</span>\\n<span class=\\\"token comment\\\">/* eslint-disable max-len,babel/new-cap,operator-linebreak,fecs-export-on-declare,space-before-function-paren */</span>\\n<span class=\\\"token keyword\\\">import</span> React<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>PureComponent<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span>styled<span class=\\\"token punctuation\\\">,</span> css<span class=\\\"token punctuation\\\">,</span> keyframes<span class=\\\"token punctuation\\\">,</span> Box<span class=\\\"token punctuation\\\">,</span> palette<span class=\\\"token punctuation\\\">,</span> Flex<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'galaco'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> getBosPicUrl <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'common/getBosPicUrl'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span>flexCenter<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'components/sharedStyle'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// borrowed from by https://www.zhangxinxu.com/study/201805/image-sequence-frame-play.html</span>\\n\\n<span class=\\\"token comment\\\">// 24 fps=> 42ms per img</span>\\n<span class=\\\"token keyword\\\">const</span> Container<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">styled</span><span class=\\\"token punctuation\\\">(</span>Box<span class=\\\"token punctuation\\\">)</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    cursor: default;\\n    img {\\n        min-width: 100%;\\n        min-height: 100%;\\n    }\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> PuppyContainer<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> styled<span class=\\\"token punctuation\\\">.</span>img<span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    flex-shrink: 0;\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> TextWrap<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">styled</span><span class=\\\"token punctuation\\\">(</span>flexCenter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    flex-direction: column;\\n    position: absolute;\\n    top: 240px;\\n    width: 100%;\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> BigText<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">styled</span><span class=\\\"token punctuation\\\">(</span>Box<span class=\\\"token punctuation\\\">)</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    font-family: PingFangSC-Medium;\\n    font-size: 62px;\\n    color: #ffffff;\\n    line-height: 60px;\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> SmallText<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">any</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">styled</span><span class=\\\"token punctuation\\\">(</span>Box<span class=\\\"token punctuation\\\">)</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    font-family: PingFangSC-Regular;\\n    font-size: 18px;\\n    color: #ffffff;\\n    letter-spacing: 0;\\n    line-height: 24px;\\n    margin-top: 30px;\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> text <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    big<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'BIG_TEXT'</span><span class=\\\"token punctuation\\\">,</span>\\n    small<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'SMALL_TEXT'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">type</span> Props <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    urlRoot<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n    indexRange<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 动画帧范围eg,[1,143]</span>\\n    visible<span class=\\\"token operator\\\">?</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">boolean</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 当前状态是否用户可见，用于控制起停</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">type</span> State <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">FrameAnimate</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">PureComponent</span><span class=\\\"token operator\\\">&lt;</span>Props<span class=\\\"token punctuation\\\">,</span> State<span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n    state<span class=\\\"token punctuation\\\">:</span> State<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">static</span> defaultProps <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    store <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>length<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    pendingStore <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>length<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    maxLength<span class=\\\"token punctuation\\\">;</span>\\n    eleContainer<span class=\\\"token punctuation\\\">;</span>\\n    elPuppy<span class=\\\"token punctuation\\\">;</span>\\n    timer<span class=\\\"token punctuation\\\">;</span>\\n    isPlaying <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// flag</span>\\n    lastIndex<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// for reset use only</span>\\n\\n    <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Container</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Flex</span></span> <span class=\\\"token attr-name\\\">use</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>flexCenter<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">PuppyContainer</span></span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>puppy<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">Flex</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">TextWrap</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">BigText</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>text<span class=\\\"token punctuation\\\">.</span>big<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">BigText</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">SmallText</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>text<span class=\\\"token punctuation\\\">.</span>small<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">SmallText</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">                </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">TextWrap</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"></span>\\n<span class=\\\"token plain-text\\\">            </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">Container</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function\\\">componentDidMount</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>eleContainer <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'container'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>elPuppy <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'puppy'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">insertPlaceholder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">prefetchImg</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function\\\">componentWillUnmount</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token function\\\">clearTimeout</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">clearAllPendingImg</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function-variable function\\\">setSrc</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">idx<span class=\\\"token punctuation\\\">,</span> force <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">false</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// idx===0 占位图</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>force <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>elPuppy<span class=\\\"token punctuation\\\">.</span>prevIdx <span class=\\\"token operator\\\">===</span> idx <span class=\\\"token operator\\\">||</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>store<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token keyword\\\">let</span> src <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getOptUrl</span><span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>urlRoot <span class=\\\"token operator\\\">+</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'000'</span> <span class=\\\"token operator\\\">+</span> idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">-</span><span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'.png'</span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// console.log('ddt::setSrc,idx', idx);</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>elPuppy<span class=\\\"token punctuation\\\">.</span>src <span class=\\\"token operator\\\">=</span> src<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>elPuppy<span class=\\\"token punctuation\\\">.</span>prevIdx <span class=\\\"token operator\\\">=</span> idx<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"highlighted-line\\\">    <span class=\\\"token comment\\\">// 不建议使用cwrp接口</span></span><span class=\\\"highlighted-line\\\">    <span class=\\\"token function\\\">componentDidUpdate</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">prevProps<span class=\\\"token punctuation\\\">,</span> prevState</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span></span>        <span class=\\\"token comment\\\">// console.log(</span>\\n        <span class=\\\"token comment\\\">//     'ddt::prevProps.visible,this.props.visible',</span>\\n        <span class=\\\"token comment\\\">//     prevProps.visible,</span>\\n        <span class=\\\"token comment\\\">//     this.props.visible</span>\\n        <span class=\\\"token comment\\\">// );</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>prevProps<span class=\\\"token punctuation\\\">.</span>visible <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>visible<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">play</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reset</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function-variable function\\\">getOptUrl</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">url</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> getBosPicUrl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">frame</span><span class=\\\"token punctuation\\\">(</span>url<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// 占位图</span>\\n    <span class=\\\"token function-variable function\\\">insertPlaceholder</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// may have some latency due to network speed</span>\\n        <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>indexRange<span class=\\\"token punctuation\\\">,</span> urlRoot<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setSrc</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">/**\\n     *  图片预加载task manage相关-start\\n     * */</span>\\n    <span class=\\\"token function-variable function\\\">addPendingImg</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">idx<span class=\\\"token punctuation\\\">,</span> img</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> img<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token function-variable function\\\">removePendingImg</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">idx</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">delete</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token function-variable function\\\">clearAllPendingImg</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">for</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">const</span> idx <span class=\\\"token keyword\\\">in</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token class-name\\\">Object</span><span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">hasOwnProperty</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">call</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">,</span> idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>src<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>onload <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n                    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>onerror <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n                    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>pendingStore<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>src <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">''</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token punctuation\\\">}</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">removePendingImg</span><span class=\\\"token punctuation\\\">(</span>idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">/**\\n     *  图片预加载task manage相关-end\\n     * */</span>\\n\\n    <span class=\\\"token comment\\\">// 预加载图片到内存</span>\\n    <span class=\\\"token function-variable function\\\">prefetchImg</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>indexRange<span class=\\\"token punctuation\\\">,</span> urlRoot<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>maxLength <span class=\\\"token operator\\\">=</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">-</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">for</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">let</span> idx <span class=\\\"token operator\\\">=</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span> idx <span class=\\\"token operator\\\">&lt;=</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span> idx<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">const</span> img <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Image</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">let</span> src <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getOptUrl</span><span class=\\\"token punctuation\\\">(</span>\\n                urlRoot <span class=\\\"token operator\\\">+</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'000'</span> <span class=\\\"token operator\\\">+</span> idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">slice</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">-</span><span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token string\\\">'.png'</span>\\n            <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            img<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">onload</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>store<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token comment\\\">// 存储预加载的图片对象</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>store<span class=\\\"token punctuation\\\">[</span>idx<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> img<span class=\\\"token punctuation\\\">;</span>\\n                img<span class=\\\"token punctuation\\\">.</span>src <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">play</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">removePendingImg</span><span class=\\\"token punctuation\\\">(</span>idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n            img<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">onerror</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>store<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">;</span>\\n                img<span class=\\\"token punctuation\\\">.</span>src <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">play</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">removePendingImg</span><span class=\\\"token punctuation\\\">(</span>idx<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n            img<span class=\\\"token punctuation\\\">.</span>src <span class=\\\"token operator\\\">=</span> src<span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">addPendingImg</span><span class=\\\"token punctuation\\\">(</span>idx<span class=\\\"token punctuation\\\">,</span> img<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token function-variable function\\\">play</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>indexRange<span class=\\\"token punctuation\\\">,</span> urlRoot<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">const</span> percent <span class=\\\"token operator\\\">=</span> Math<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">round</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">100</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>store<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>maxLength<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// 预加载完毕后开始动画，防重入</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>percent <span class=\\\"token operator\\\">==</span> <span class=\\\"token number\\\">100</span> <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>isPlaying<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>isPlaying <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token keyword\\\">let</span> index <span class=\\\"token operator\\\">=</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n            <span class=\\\"token comment\\\">// 依次append图片对象</span>\\n            <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">step</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>isPlaying <span class=\\\"token operator\\\">||</span> <span class=\\\"token operator\\\">!</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>visible<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token punctuation\\\">}</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setSrc</span><span class=\\\"token punctuation\\\">(</span>index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>lastIndex <span class=\\\"token operator\\\">=</span> index<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// remember last inserted index</span>\\n                <span class=\\\"token comment\\\">// 序列增加</span>\\n                index<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token comment\\\">// 如果超过最大限制</span>\\n                <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>index <span class=\\\"token operator\\\">&lt;=</span> indexRange<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">setTimeout</span><span class=\\\"token punctuation\\\">(</span>step<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">42</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token comment\\\">// 本段播放结束回调</span>\\n                    <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">reset</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token punctuation\\\">}</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token comment\\\">// 等100%动画结束后执行播放</span>\\n            <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">setTimeout</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token function\\\">step</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">100</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token comment\\\">// 重置</span>\\n    <span class=\\\"token function-variable function\\\">reset</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>isPlaying<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>isPlaying <span class=\\\"token operator\\\">=</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>indexRange<span class=\\\"token punctuation\\\">,</span> urlRoot<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setSrc</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>lastIndex<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token function\\\">clearTimeout</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>timer<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> FrameAnimate<span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"帧动画闪烁和浏览器兼容性\",\n    level: 2,\n    title: \"帧动画闪烁和浏览器兼容性\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"webpack-与调试-es5\",\n    level: 2,\n    title: \"webpack 与调试 es5\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"ie11-css兼容性相关\",\n    level: 2,\n    title: \"IE11 CSS兼容性相关\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"百度云缓存\",\n    level: 2,\n    title: \"百度云缓存\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"png-压缩\",\n    level: 2,\n    title: \"PNG 压缩\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"unicode-文本编码\",\n    level: 2,\n    title: \"unicode 文本编码\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"帧动画实现\",\n    level: 2,\n    title: \"帧动画实现\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n"],"sourceRoot":""}