(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{324:function(n,s,a){"use strict";a.r(s),a.d(s,"readingTime",function(){return o}),a.d(s,"default",function(){return u}),a.d(s,"tableOfContents",function(){return l}),a.d(s,"frontMatter",function(){return i});var t=a(36),p=(a(0),a(35)),o={text:"3 min read",minutes:2.805,time:168300,words:561},e={},c="wrapper";function u(n){var s=n.components,a=Object(t.a)(n,["components"]);return Object(p.mdx)(c,Object.assign({},e,a,{components:s,mdxType:"MDXLayout"}),Object(p.mdx)("h2",{id:"\u4f60\u53ef\u4ee5\u4ece\u672c\u6587\u4e86\u89e3\u5230"},"\u4f60\u53ef\u4ee5\u4ece\u672c\u6587\u4e86\u89e3\u5230"),Object(p.mdx)("p",null,"\u5229\u7528\u804a\u5929\u683c\u5f0f\u4e0e\u9488\u5bf9\u7279\u5b9a\u4efb\u52a1\u6216\u884c\u4e3a\u8fdb\u884c\u4e2a\u6027\u5316\u6216\u4e13\u95e8\u5316\u7684\u804a\u5929\u673a\u5668\u4eba\u8fdb\u884c\u6269\u5c55\u5bf9\u8bdd\u3002"),Object(p.mdx)("h2",{id:"setup"},"Setup"),Object(p.mdx)("pre",null,Object(p.mdx)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> os\n<span class="token keyword">import</span> openai\n<span class="token keyword">from</span> dotenv <span class="token keyword">import</span> load_dotenv<span class="token punctuation">,</span> find_dotenv\n_ <span class="token operator">=</span> load_dotenv<span class="token punctuation">(</span>find_dotenv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># read local .env file</span>\n\nopenai<span class="token punctuation">.</span>api_key  <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">\'OPENAI_API_KEY\'</span><span class="token punctuation">)</span>\n\n<span class="token keyword">def</span> <span class="token function">get_completion</span><span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> prompt<span class="token punctuation">}</span><span class="token punctuation">]</span>\n    response <span class="token operator">=</span> openai<span class="token punctuation">.</span>ChatCompletion<span class="token punctuation">.</span>create<span class="token punctuation">(</span>\n        model<span class="token operator">=</span>model<span class="token punctuation">,</span>\n        messages<span class="token operator">=</span>messages<span class="token punctuation">,</span>\n        temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment"># this is the degree of randomness of the model\'s output</span>\n    <span class="token punctuation">)</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span>\n\n<span class="token keyword">def</span> <span class="token function">get_completion_from_messages</span><span class="token punctuation">(</span>messages<span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo"</span><span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    response <span class="token operator">=</span> openai<span class="token punctuation">.</span>ChatCompletion<span class="token punctuation">.</span>create<span class="token punctuation">(</span>\n        model<span class="token operator">=</span>model<span class="token punctuation">,</span>\n        messages<span class="token operator">=</span>messages<span class="token punctuation">,</span>\n        temperature<span class="token operator">=</span>temperature<span class="token punctuation">,</span> <span class="token comment"># this is the degree of randomness of the model\'s output</span>\n    <span class="token punctuation">)</span>\n<span class="token comment">#     print(str(response.choices[0].message))</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span>\n\nmessages <span class="token operator">=</span>  <span class="token punctuation">[</span>  \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'You are an assistant that speaks like Shakespeare.\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'tell me a joke\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'assistant\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'Why did the chicken cross the road\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'I don\\\'t know\'</span><span class="token punctuation">}</span>  <span class="token punctuation">]</span>\n\nresponse <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>messages<span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n\n<span class="token comment"># To get to the other side, perchance? \'Tis an old and simple joke, yet it doth always bring a smile to mine face.</span>\n\nmessages <span class="token operator">=</span>  <span class="token punctuation">[</span>  \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'You are friendly chatbot.\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'Hi, my name is Isa\'</span><span class="token punctuation">}</span>  <span class="token punctuation">]</span>\nresponse <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>messages<span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n\n<span class="token comment"># Hello Isa, It\'s nice to meet you! How can I assist you today?</span>\n\nmessages <span class="token operator">=</span>  <span class="token punctuation">[</span>  \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'You are friendly chatbot.\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'Yes,  can you remind me, What is my name?\'</span><span class="token punctuation">}</span>  <span class="token punctuation">]</span>\nresponse <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>messages<span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n\n<span class="token comment"># I\'m sorry, but I don\'t have access to that information. As a chatbot, I don\'t have the ability to remember past conversations or personal details about users. Is there anything else I can help you with?</span>\n\nmessages <span class="token operator">=</span>  <span class="token punctuation">[</span>  \n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'You are friendly chatbot.\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'Hi, my name is Isa\'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'assistant\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span> "Hi Isa! It\'s nice to meet you<span class="token punctuation">.</span> \\\nIs there anything I can <span class="token builtin">help</span> you <span class="token keyword">with</span> today?"<span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string">\'Yes, you can remind me, What is my name?\'</span><span class="token punctuation">}</span>  <span class="token punctuation">]</span>\nresponse <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>messages<span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n\n<span class="token comment"># Your name is Isa, it\'s a pleasure to address you by your name.</span>\n'}}))),Object(p.mdx)("h2",{id:"orderbot"},"OrderBot"),Object(p.mdx)("p",null,"\u6211\u4eec\u53ef\u4ee5\u81ea\u52a8\u6536\u96c6\u7528\u6237\u63d0\u793a\u548c\u52a9\u624b\u54cd\u5e94\u4ee5\u6784\u5efa OrderBot\u3002 OrderBot \u5c06\u5728\u6bd4\u8428\u9910\u5385\u63a5\u53d7\u8ba2\u5355\u3002"),Object(p.mdx)("pre",null,Object(p.mdx)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">def</span> <span class="token function">collect_messages</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    prompt <span class="token operator">=</span> inp<span class="token punctuation">.</span>value_input\n    inp<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">\'\'</span>\n    context<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'user\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>prompt<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n    response <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>context<span class="token punctuation">)</span> \n    context<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'assistant\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n    panels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>\n        pn<span class="token punctuation">.</span>Row<span class="token punctuation">(</span><span class="token string">\'User:\'</span><span class="token punctuation">,</span> pn<span class="token punctuation">.</span>pane<span class="token punctuation">.</span>Markdown<span class="token punctuation">(</span>prompt<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    panels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>\n        pn<span class="token punctuation">.</span>Row<span class="token punctuation">(</span><span class="token string">\'Assistant:\'</span><span class="token punctuation">,</span> pn<span class="token punctuation">.</span>pane<span class="token punctuation">.</span>Markdown<span class="token punctuation">(</span>response<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">,</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">\'background-color\'</span><span class="token punctuation">:</span> <span class="token string">\'#F6F6F6\'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n \n    <span class="token keyword">return</span> pn<span class="token punctuation">.</span>Column<span class="token punctuation">(</span><span class="token operator">*</span>panels<span class="token punctuation">)</span>\n\n<span class="token keyword">import</span> panel <span class="token keyword">as</span> pn  <span class="token comment"># GUI</span>\npn<span class="token punctuation">.</span>extension<span class="token punctuation">(</span><span class="token punctuation">)</span>\n\npanels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># collect display </span>\n\ncontext <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""\n\u4f60\u662fOrderBot\uff0c\u4e00\u4e2a\u4e3a\u6bd4\u8428\u5e97\u6536\u96c6\u8ba2\u5355\u7684\u81ea\u52a8\u5316\u670d\u52a1\u3002\n\u4f60\u9996\u5148\u95ee\u5019\u987e\u5ba2\uff0c\u7136\u540e\u6536\u96c6\u8ba2\u5355\uff0c\u518d\u8be2\u95ee\u662f\u53d6\u8d27\u8fd8\u662f\u9001\u8d27\u3002\n\u4f60\u7b49\u5f85\u6536\u96c6\u6574\u4e2a\u8ba2\u5355\uff0c\u7136\u540e\u8fdb\u884c\u603b\u7ed3\uff0c\u5e76\u6700\u540e\u4e00\u6b21\u68c0\u67e5\u987e\u5ba2\u662f\u5426\u60f3\u6dfb\u52a0\u5176\u4ed6\u4e1c\u897f\u3002\n\u5982\u679c\u662f\u9001\u8d27\uff0c\u4f60\u5c31\u8981\u6c42\u63d0\u4f9b\u5730\u5740\u3002\n\u6700\u540e\u4f60\u6536\u53d6\u4ed8\u6b3e\u3002\n\u786e\u4fdd\u6f84\u6e05\u6240\u6709\u7684\u9009\u9879\u3001\u989d\u5916\u7684\u4e1c\u897f\u548c\u5c3a\u5bf8\uff0c\u4ee5\u4fbf\u4ece\u83dc\u5355\u4e0a\u552f\u4e00\u5730\u8bc6\u522b\u8be5\u9879\u76ee\u3002\n\u4f60\u4ee5\u7b80\u77ed\u7684\u3001\u975e\u5e38\u5bf9\u8bdd\u5f0f\u7684\u53cb\u597d\u98ce\u683c\u56de\u7b54\u3002\n\n\u83dc\u5355\u5305\u62ec\u610f\u5927\u5229\u9999\u80a0\u6bd4\u842812.95\uff0c10.00\uff0c7.00\n\u5976\u916a\u6bd4\u842810.95\uff0c9.25\uff0c6.50\n\u8304\u5b50\u6bd4\u842811.95\uff0c9.75\uff0c6.75\n\u85af\u67614.50\uff0c3.50\n\u5e0c\u814a\u6c99\u62c97.25\n\n\u914d\u6599\uff1a\n\u989d\u5916\u5976\u916a2.00\n\u8611\u83c7 1.50 \n\u9999\u80a0 3.00 \n\u52a0\u62ff\u5927\u57f9\u6839 3.50 \nAI\u9171 1.50 \n\u8fa3\u6912 1.00 \n\n\u996e\u6599: \n\u53ef\u4e50 3.00, 2.00, 1.00 \n\u96ea\u78a7 3.00, 2.00, 1.00 \n\u74f6\u88c5\u6c34 5.00\n"""</span><span class="token punctuation">}</span> <span class="token punctuation">]</span>  <span class="token comment"># accumulate messages</span>\n\n\ninp <span class="token operator">=</span> pn<span class="token punctuation">.</span>widgets<span class="token punctuation">.</span>TextInput<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"Hi"</span><span class="token punctuation">,</span> placeholder<span class="token operator">=</span><span class="token string">\'Enter text here\u2026\'</span><span class="token punctuation">)</span>\nbutton_conversation <span class="token operator">=</span> pn<span class="token punctuation">.</span>widgets<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"Chat!"</span><span class="token punctuation">)</span>\n\ninteractive_conversation <span class="token operator">=</span> pn<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>collect_messages<span class="token punctuation">,</span> button_conversation<span class="token punctuation">)</span>\n\ndashboard <span class="token operator">=</span> pn<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>\n    inp<span class="token punctuation">,</span>\n    pn<span class="token punctuation">.</span>Row<span class="token punctuation">(</span>button_conversation<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    pn<span class="token punctuation">.</span>panel<span class="token punctuation">(</span>interactive_conversation<span class="token punctuation">,</span> loading_indicator<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">)</span>\n\ndashboard\n'}}))),Object(p.mdx)("p",null,"\u8fd0\u884cchatbot"),Object(p.mdx)("pre",null,Object(p.mdx)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'User<span class="token punctuation">:</span>\n\nAssistant<span class="token punctuation">:</span>\n\n\u4f60\u597d\uff01\u6b22\u8fce\u6765\u5230\u6211\u4eec\u7684\u6bd4\u8428\u5e97\u3002\u60a8\u60f3\u70b9\u4ec0\u4e48\u5462\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u6709\u5565\u5403\u7684\n\nAssistant<span class="token punctuation">:</span>\n\n\u6211\u4eec\u6709\u610f\u5927\u5229\u9999\u80a0\u6bd4\u8428\u3001\u5976\u916a\u6bd4\u8428\u3001\u8304\u5b50\u6bd4\u8428\u3001\u85af\u6761\u548c\u5e0c\u814a\u6c99\u62c9\u3002\u60a8\u60f3\u5c1d\u8bd5\u54ea\u4e00\u79cd\u5462\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u5976\u916a\u62ab\u8428\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u5976\u916a\u6bd4\u8428\u662f\u6211\u4eec\u7684\u62db\u724c\u83dc\u4e4b\u4e00\u3002\u6211\u4eec\u6709\u4e09\u79cd\u5c3a\u5bf8\u53ef\u4f9b\u9009\u62e9\uff1a\u5c0f\u53f7<span class="token number">6.50</span>\u7f8e\u5143\uff0c\u4e2d\u53f7<span class="token number">9.25</span>\u7f8e\u5143\u548c\u5927\u53f7<span class="token number">10.95</span>\u7f8e\u5143\u3002\u60a8\u60f3\u8981\u54ea\u4e2a\u5c3a\u5bf8\u7684\u5462\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u5927\u7684\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u5927\u53f7\u5976\u916a\u6bd4\u8428\u662f<span class="token number">10.95</span>\u7f8e\u5143\u3002\u60a8\u60f3\u8981\u6dfb\u52a0\u4efb\u4f55\u914d\u6599\u5417\uff1f\u6211\u4eec\u6709\u989d\u5916\u7684\u5976\u916a\u3001\u8611\u83c7\u3001\u9999\u80a0\u3001\u52a0\u62ff\u5927\u57f9\u6839\u3001AI\u9171\u548c\u8fa3\u6912\u53ef\u4f9b\u9009\u62e9\u3002\n\nUser<span class="token punctuation">:</span>\n\n\u8fa3\u6912\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u6211\u4eec\u4f1a\u5728\u60a8\u7684\u5927\u53f7\u5976\u916a\u6bd4\u8428\u4e0a\u6dfb\u52a0\u8fa3\u6912\u3002\u60a8\u60f3\u8981\u518d\u70b9\u4e9b\u4ec0\u4e48\u5417\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u5c31\u8fd9\u6837\u5427\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u90a3\u4e48\u60a8\u662f\u8981\u6765\u53d6\u8fd8\u662f\u8981\u9001\u8d27\u5462\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u9001\u8d27\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u4e3a\u4e86\u9001\u8d27\uff0c\u6211\u4eec\u9700\u8981\u60a8\u7684\u5730\u5740\u3002\u8bf7\u544a\u8bc9\u6211\u60a8\u7684\u5730\u5740\uff0c\u5305\u62ec\u8857\u9053\u3001\u95e8\u724c\u53f7\u7801\u3001\u57ce\u5e02\u548c\u90ae\u653f\u7f16\u7801\u3002\n\nUser<span class="token punctuation">:</span>\n\n\u5c31\u5728\u9a6c\u8def\u5bf9\u9762\u7684\u6c34\u679c\u5e97\u91cc\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u6211\u4eec\u4f1a\u5728\u6c34\u679c\u5e97\u5bf9\u9762\u7684\u5730\u5740\u9001\u8d27\u3002\u8bf7\u95ee\u60a8\u9700\u8981\u4ec0\u4e48\u996e\u6599\u5417\uff1f\u6211\u4eec\u6709\u53ef\u4e50\u3001\u96ea\u78a7\u548c\u74f6\u88c5\u6c34\u53ef\u4f9b\u9009\u62e9\u3002\n\nUser<span class="token punctuation">:</span>\n\n\u53ef\u53e3\u53ef\u4e50\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u60a8\u60f3\u8981\u5c0f\u53f7\u3001\u4e2d\u53f7\u8fd8\u662f\u5927\u53f7\u53ef\u53e3\u53ef\u4e50\u5462\uff1f\u6211\u4eec\u7684\u4ef7\u683c\u5206\u522b\u662f<span class="token number">1.00</span>\u7f8e\u5143\u3001<span class="token number">2.00</span>\u7f8e\u5143\u548c<span class="token number">3.00</span>\u7f8e\u5143\u3002\n\nUser<span class="token punctuation">:</span>\n\n\u5927\u7684\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u5927\u53f7\u53ef\u53e3\u53ef\u4e50\u662f<span class="token number">3.00</span>\u7f8e\u5143\u3002\u8bf7\u95ee\u60a8\u8fd8\u9700\u8981\u5176\u4ed6\u7684\u4e1c\u897f\u5417\uff1f\n\nUser<span class="token punctuation">:</span>\n\n\u5c31\u8fd9\u6837\u5427\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u8ba9\u6211\u6765\u786e\u8ba4\u60a8\u7684\u8ba2\u5355\u3002\u60a8\u70b9\u4e86\u4e00\u4efd\u5927\u53f7\u5976\u916a\u6bd4\u8428\uff0c\u52a0\u4e0a\u8fa3\u6912\uff0c\u4e00\u74f6\u5927\u53f7\u53ef\u53e3\u53ef\u4e50\u3002\u60a8\u7684\u9001\u8d27\u5730\u5740\u662f\u6c34\u679c\u5e97\u5bf9\u9762\u3002\u60a8\u7684\u8ba2\u5355\u603b\u4ef7\u662f<span class="token number">13.95</span>\u7f8e\u5143\u3002\u8bf7\u95ee\u60a8\u60f3\u7528\u54ea\u79cd\u4ed8\u6b3e\u65b9\u5f0f\u5462\uff1f\u6211\u4eec\u63a5\u53d7\u73b0\u91d1\u3001\u4fe1\u7528\u5361\u548c\u652f\u4ed8\u5b9d\u3002\n\nUser<span class="token punctuation">:</span>\n\n\u652f\u4ed8\u5b9d\n\nAssistant<span class="token punctuation">:</span>\n\n\u597d\u7684\uff0c\u6211\u4eec\u63a5\u53d7\u652f\u4ed8\u5b9d\u4ed8\u6b3e\u3002\u8bf7\u5c06<span class="token number">13.95</span>\u7f8e\u5143\u8f6c\u8d26\u5230\u6211\u4eec\u7684\u652f\u4ed8\u5b9d\u8d26\u6237\u3002\u8d26\u6237\u4fe1\u606f\u662f\uff1axxxxxx\u3002\u4e00\u65e6\u60a8\u5b8c\u6210\u4ed8\u6b3e\uff0c\u6211\u4eec\u5c06\u7acb\u5373\u4e3a\u60a8\u51c6\u5907\u8ba2\u5355\u3002\u8c22\u8c22\u60a8\u7684\u8ba2\u8d2d\uff01\n'}}))),Object(p.mdx)("p",null,"\u6253\u5370\u8ba2\u5355\u6458\u8981"),Object(p.mdx)("pre",null,Object(p.mdx)("code",Object.assign({parentName:"pre"},{className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'messages <span class="token operator">=</span>  context<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>\nmessages<span class="token punctuation">.</span>append<span class="token punctuation">(</span>\n<span class="token punctuation">{</span><span class="token string">\'role\'</span><span class="token punctuation">:</span><span class="token string">\'system\'</span><span class="token punctuation">,</span> <span class="token string">\'content\'</span><span class="token punctuation">:</span>\'\u521b\u5efa\u4e00\u4e2a\u524d\u4e00\u4e2a\u98df\u54c1\u8ba2\u5355\u7684json\u6458\u8981\u3002\u9010\u9879\u5217\u51fa\u6bcf\u4e2a\u9879\u76ee\u7684\u4ef7\u683c\u3002\\\n \u5b57\u6bb5\u5e94\u8be5\u662f\uff1a<span class="token number">1</span>\uff09\u6bd4\u8428\u997c\uff0c\u5305\u62ec\u5c3a\u5bf8 <span class="token number">2</span>\uff09\u914d\u6599\u5217\u8868 <span class="token number">3</span>\uff09\u996e\u6599\u5217\u8868\uff0c\u5305\u62ec\u5c3a\u5bf8 <span class="token number">4</span>\uff09\u914d\u83dc\u5217\u8868\uff0c\u5305\u62ec\u5c3a\u5bf8 <span class="token number">5</span>\uff09\u603b\u4ef7\'<span class="token punctuation">}</span><span class="token punctuation">,</span>    \n<span class="token punctuation">)</span>\n <span class="token comment">#The fields should be 1) pizza, price 2) list of toppings 3) list of drinks, include size include price  4) list of sides include size include price, 5)total price \'},    </span>\n\nresponse <span class="token operator">=</span> get_completion_from_messages<span class="token punctuation">(</span>messages<span class="token punctuation">,</span> temperature<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>\n<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n\n<span class="token comment"># \u4ee5\u4e0b\u662f\u524d\u4e00\u4e2a\u8ba2\u5355\u7684JSON\u6458\u8981\uff1a</span>\n\n<span class="token comment"># {</span>\n<span class="token comment">#   "pizza": {</span>\n<span class="token comment">#     "size": "14\u82f1\u5bf8",</span>\n<span class="token comment">#     "type": "\u5976\u916a\u6bd4\u8428",</span>\n<span class="token comment">#     "toppings": ["\u8fa3\u6912"]</span>\n<span class="token comment">#   },</span>\n<span class="token comment">#   "drinks": [</span>\n<span class="token comment">#     {</span>\n<span class="token comment">#       "type": "\u53ef\u4e50",</span>\n<span class="token comment">#       "size": "\u5927\u676f",</span>\n<span class="token comment">#       "price": 3.00</span>\n<span class="token comment">#     }</span>\n<span class="token comment">#   ],</span>\n<span class="token comment">#   "sides": [],</span>\n<span class="token comment">#   "total_price": 14.95</span>\n<span class="token comment"># } </span>\n\n<span class="token comment"># \u5176\u4e2d\uff0c\u6bd4\u8428\u7684\u4ef7\u683c\u4e3a10.95\u7f8e\u5143\uff0c\u52a0\u4e0a\u8fa3\u6912\u7684\u4ef7\u683c1.00\u7f8e\u5143\uff0c\u603b\u4ef7\u4e3a11.95\u7f8e\u5143\u3002\u996e\u6599\u7684\u4ef7\u683c\u4e3a3.00\u7f8e\u5143\u3002\u56e0\u6b64\uff0c\u8ba2\u5355\u7684\u603b\u4ef7\u4e3a14.95\u7f8e\u5143\u3002\u914d\u83dc\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u6ca1\u6709\u5217\u51fa\u3002</span>\n'}}))))}u.isMDXComponent=!0;var l=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"\u4f60\u53ef\u4ee5\u4ece\u672c\u6587\u4e86\u89e3\u5230",level:2,title:"\u4f60\u53ef\u4ee5\u4ece\u672c\u6587\u4e86\u89e3\u5230",children:[]},{id:"setup",level:2,title:"Setup",children:[]},{id:"orderbot",level:2,title:"OrderBot",children:[]}]},i={}}}]);
//# sourceMappingURL=160.fbe9b91a.chunk.js.map