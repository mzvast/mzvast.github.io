{"version":3,"sources":["routes/posts/2020/08/28-performance-optimize-rethink/document.mdx","routes/posts/2020/08/28-performance-optimize-rethink/bg.png","routes/posts/2020/08/28-performance-optimize-rethink/longlist.png"],"names":["readingTime","text","minutes","time","words","layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_home_travis_build_mzvast_mzvast_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_2__","assign","mdxType","id","parentName","src","bg","href","className","data-language","data-highlighted-line-numbers","dangerouslySetInnerHTML","__html","longlist","isMDXComponent","tableOfContents","arguments","length","undefined","level","title","children","frontMatter","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/8.735196b7.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"4 min read\",\"minutes\":3.54,\"time\":212400,\"words\":708}\n/* @jsx mdx */\nimport bg from './bg.png';\nimport longlist from './longlist.png';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"你可以从本文了解到以下方面的优化思路\"\n    }}>{`你可以从本文了解到以下方面的优化思路`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`图片`}</li>\n      <li parentName=\"ol\">{`字体`}</li>\n      <li parentName=\"ol\">{`长列表`}</li>\n      <li parentName=\"ol\">{`优先加载`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"背景\"\n    }}>{`背景`}</h2>\n    <p>{`在混合 H5 项目 A 中，有一个大量图片的信息流页面，并且需要在多个 Tab 切换。如下图所示（已脱敏）。`}</p>\n    <img src={bg} />\n    <p>{`存在的问题主要有：`}</p>\n    <ol>\n      <li parentName=\"ol\">{`图片尺寸大，下载慢。非常占用 Android 壳的缓存，约 70–80M。 `}</li>\n      <li parentName=\"ol\">{`切换 Tab 卡（尤其在长列表间切换的时候） `}</li>\n      <li parentName=\"ol\">{`自定义字体占据 30M，字体 swap 时间长 `}</li>\n      <li parentName=\"ol\">{`长列表越往下滑动越卡。`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"优化策略\"\n    }}>{`优化策略`}</h2>\n    <h3 {...{\n      \"id\": \"图片\"\n    }}>{`图片`}</h3>\n    <p>{`核心：体积控制`}</p>\n    <ol>\n      <li parentName=\"ol\">{`尺寸在看得清的情况下尽可能小(size 够用就行)`}</li>\n      <li parentName=\"ol\">{`高压缩比格式（quality 能接受就行）`}</li>\n      <li parentName=\"ol\">{`尽可能少的研发`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`方案 1 （❌）`}</p>\n        <p parentName=\"li\">{`自己压缩全部图片\n优点：自主可控\n缺点：灵活性差和研发部署成本高`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`方案 2（✅）`}</p>\n        <p parentName=\"li\">{`使用第三方图片存储的实时处理能力（`}<a parentName=\"p\" {...{\n            \"href\": \"https://cloud.baidu.com/doc/BOS/s/Zk2l2mq0v\"\n          }}>{`百度云 BOS`}</a>{`）`}</p>\n        <p parentName=\"li\">{`优点：灵活性好和研发部署成本低\n缺点：相对低的可控性`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`效果`}</p>\n        <p parentName=\"li\">{`加载速度提升 26 倍，体积缩小 95%`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`代码片段`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-typescript\",\n            \"data-language\": \"typescript\",\n            \"data-highlighted-line-numbers\": \"\",\n            \"dangerouslySetInnerHTML\": {\n              \"__html\": \"<span class=\\\"token keyword\\\">import</span> canUseWebP <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./canUseWebP'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">//BOS 图片优化 https://cloud.baidu.com/doc/BOS/s/Zk2l2mq0v</span>\\n\\n<span class=\\\"token comment\\\">// small 350</span>\\n<span class=\\\"token comment\\\">// mid 640</span>\\n<span class=\\\"token comment\\\">// large 1280</span>\\n<span class=\\\"token comment\\\">// size向上靠拢，尽可能应用缓存</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getLevelUpSize</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">size<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>size <span class=\\\"token operator\\\">&lt;=</span> <span class=\\\"token number\\\">350</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">350</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>size <span class=\\\"token operator\\\">&lt;=</span> <span class=\\\"token number\\\">640</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">640</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">1280</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getBosPicUrl</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">src<span class=\\\"token punctuation\\\">,</span> sizeInPx <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">Infinity</span><span class=\\\"token punctuation\\\">,</span> ImgQuality <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">50</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> isBosPic <span class=\\\"token operator\\\">=</span> src<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">indexOf</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bcebos'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">!==</span> <span class=\\\"token operator\\\">-</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>isBosPic<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">return</span> src<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 不是bos图，不处理</span>\\n    <span class=\\\"token keyword\\\">const</span> format <span class=\\\"token operator\\\">=</span> canUseWebP <span class=\\\"token operator\\\">?</span> <span class=\\\"token string\\\">'f_webp'</span> <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'f_jpg'</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> dpr <span class=\\\"token operator\\\">=</span> window<span class=\\\"token punctuation\\\">.</span>devicePixelRatio<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> size <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">'w_'</span> <span class=\\\"token operator\\\">+</span> Math<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">floor</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">getLevelUpSize</span><span class=\\\"token punctuation\\\">(</span>sizeInPx<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">*</span> dpr<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> quality <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">'q_'</span> <span class=\\\"token operator\\\">+</span> ImgQuality<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">// const display = 'd_progressive';</span>\\n    <span class=\\\"token keyword\\\">const</span> command <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>size<span class=\\\"token punctuation\\\">,</span> format<span class=\\\"token punctuation\\\">,</span> quality<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">','</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>src<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">@</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>command<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> getBosPicUrl<span class=\\\"token punctuation\\\">;</span>\\n\"\n            }\n          }}></code></pre>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"字体\"\n    }}>{`字体`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`痛点`}</p>\n        <p parentName=\"li\">{`体积非常大，动辄 30M，卡慢，体验差`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`策略`}</p>\n        <p parentName=\"li\">{`Android 壳 cacheWebview 内置字体文件，通过自定义拦截器路径拦截`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`效果`}</p>\n        <p parentName=\"li\">{`字体渲染提速 5 倍`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`前端CSS代码片段`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-css\",\n            \"data-language\": \"css\",\n            \"data-highlighted-line-numbers\": \"\",\n            \"dangerouslySetInnerHTML\": {\n              \"__html\": \"<span class=\\\"token atrule\\\"><span class=\\\"token rule\\\">@font-face</span></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">font-family</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'NotoSansCJKsc-Medium'</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">/* src: url('./assets/fonts/NotoSansCJKsc-Medium.otf') format('opentype'); */</span>\\n    <span class=\\\"token property\\\">src</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token function\\\">local</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'NotoSansCJKsc-Medium'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token function\\\">local</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Droid Sans Fallback'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token url\\\"><span class=\\\"token function\\\">url</span><span class=\\\"token punctuation\\\">(</span>'YOUR_DOMAIN/FILE_NAME'<span class=\\\"token punctuation\\\">)</span></span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token url\\\"><span class=\\\"token function\\\">url</span><span class=\\\"token punctuation\\\">(</span>'FALLBACK_URL'<span class=\\\"token punctuation\\\">)</span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token property\\\">font-weight</span><span class=\\\"token punctuation\\\">:</span> bold<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token property\\\">font-display</span><span class=\\\"token punctuation\\\">:</span> swap<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"\n            }\n          }}></code></pre>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"长列表\"\n    }}>{`长列表`}</h2>\n    <h3 {...{\n      \"id\": \"虚拟渲染-原理\"\n    }}>{`虚拟渲染-原理`}</h3>\n    <p>{`只渲染用户视口区域的元素，其他区域仅撑开高度保持滚动条位置准确。`}</p>\n    <img src={longlist} />\n    <p>{`在 React 下面可以采用`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/bvaughn/react-window\"\n      }}>{`react-window`}</a>{`.`}</p>\n    <h4 {...{\n      \"id\": \"简单看一下react-window核心数据结构\"\n    }}>{`简单看一下react-window核心数据结构`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\",\n        \"data-language\": \"typescript\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">type</span> ItemMetadata <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token operator\\\">|</span>\\n  offset<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 当前item距离屏幕顶部的距离</span>\\n  size<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 当前item的高度</span>\\n<span class=\\\"token operator\\\">|</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 一个window实例的数据结构</span>\\n<span class=\\\"token keyword\\\">type</span> InstanceProps <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token operator\\\">|</span>\\n  itemMetadataMap<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token punctuation\\\">[</span>index<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">:</span> ItemMetadata <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 缓存已计算过的item</span>\\n  estimatedItemSize<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// item默认高度</span>\\n  lastMeasuredIndex<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 最后计算的item</span>\\n<span class=\\\"token operator\\\">|</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`render 函数`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Wrap</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">AutoSizer</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n        </span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span>height<span class=\\\"token punctuation\\\">,</span> width<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">VariableSizeList</span></span>\\n                <span class=\\\"token attr-name\\\">height</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>height<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">itemCount</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>rowData<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">itemSize</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>getItemSize<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">itemData</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>rowData<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">itemKey</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>getItemKey<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">width</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>width<span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">ref</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">node</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>listEl <span class=\\\"token operator\\\">=</span> node<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span></span>\\n                <span class=\\\"token attr-name\\\">onScroll</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>onScroll<span class=\\\"token punctuation\\\">}</span></span>\\n            <span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n                </span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>renderRow<span class=\\\"token punctuation\\\">}</span><span class=\\\"token plain-text\\\">\\n            </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">VariableSizeList</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">AutoSizer</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">ScrollToTop</span></span>\\n        <span class=\\\"token attr-name\\\">onoff</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>state<span class=\\\"token punctuation\\\">.</span>isRrocketShow<span class=\\\"token punctuation\\\">}</span></span>\\n        <span class=\\\"token attr-name\\\">scrollCB</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>hideRocket<span class=\\\"token punctuation\\\">}</span></span>\\n        <span class=\\\"token attr-name\\\">target</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>listEl<span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\">\\n</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">Wrap</span></span><span class=\\\"token punctuation\\\">></span></span>\\n\"\n        }\n      }}></code></pre>\n    <h4 {...{\n      \"id\": \"我们需要提供的数据\"\n    }}>{`我们需要提供的数据`}</h4>\n    <ol>\n      <li parentName=\"ol\">{`itemData（列表全数据）`}</li>\n      <li parentName=\"ol\">{`滚动事件（一方面组件内部使用），控制回到顶部小火箭的显隐。`}</li>\n      <li parentName=\"ol\">{`itemKey 方法，确定每个元素在 list 中唯一的标识符号（react 渲染用）`}</li>\n      <li parentName=\"ol\">{`itemSize 方法，获取每个元素的 height\n基于这些，虚拟渲染组件会合成一个 itemMetadataMap.`}</li>\n    </ol>\n    <h4 {...{\n      \"id\": \"从-list-到-gird\"\n    }}>{`从 List 到 Gird`}</h4>\n    <p>{`业务需要对内容定制。一个是横高度不固定，底部会有菊花。所以对内容的类型进行了分类。`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Array：一行卡片。其中每个卡片的类型是FEED_ITEM，4个一行，计算生成。\nFEED_SUBJECT：XX标题\nTOP_MARGIN：顶部占位块（纯布局用）\nFEED_LOADER：底部更多菊花\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token comment\\\">// list数据模型的生成</span>\\n<span class=\\\"token function-variable function\\\">getRowData</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>activeKey<span class=\\\"token punctuation\\\">,</span> tabsData<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> list <span class=\\\"token operator\\\">=</span> tabsData<span class=\\\"token punctuation\\\">[</span>activeKey<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">let</span> rowData <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    rowData<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n        type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">TOP_MARGIN</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">for</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">let</span> i <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span> i <span class=\\\"token operator\\\">&lt;</span> list<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token punctuation\\\">;</span> i<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">const</span> item <span class=\\\"token operator\\\">=</span> list<span class=\\\"token punctuation\\\">[</span>i<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>\\n            i <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">||</span>\\n            list<span class=\\\"token punctuation\\\">[</span>i <span class=\\\"token operator\\\">-</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>teachingMetadata<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'subject'</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">!==</span>\\n                item<span class=\\\"token punctuation\\\">.</span>teachingMetadata<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'subject'</span><span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            rowData<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n                type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_SUBJECT</span><span class=\\\"token punctuation\\\">,</span>\\n                text<span class=\\\"token punctuation\\\">:</span> item<span class=\\\"token punctuation\\\">.</span>teachingMetadata<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'subject'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n                isFirstSubject<span class=\\\"token punctuation\\\">:</span> i <span class=\\\"token operator\\\">===</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token keyword\\\">let</span> last <span class=\\\"token operator\\\">=</span> rowData<span class=\\\"token punctuation\\\">[</span>rowData<span class=\\\"token punctuation\\\">.</span>length <span class=\\\"token operator\\\">-</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>last <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Array</span> <span class=\\\"token operator\\\">&amp;&amp;</span> last<span class=\\\"token punctuation\\\">.</span>length <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            last<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n                type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_ITEM</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token operator\\\">...</span>item<span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            rowData<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span>\\n                <span class=\\\"token punctuation\\\">{</span>\\n                    type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_ITEM</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token operator\\\">...</span>item<span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getFeedLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        rowData<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">push</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n            type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_LOADER</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token keyword\\\">return</span> rowData<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// 渲染某一行</span>\\nrenderRow <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">memo</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span>data<span class=\\\"token punctuation\\\">,</span> index<span class=\\\"token punctuation\\\">,</span> style<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// const rowData = this.rowData; //this.getRowData();</span>\\n    <span class=\\\"token keyword\\\">const</span> item <span class=\\\"token operator\\\">=</span> data<span class=\\\"token punctuation\\\">[</span>index<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span>item<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'renderRow::item'</span><span class=\\\"token punctuation\\\">,</span> item<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Array</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token comment\\\">// ...</span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_SUBJECT</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n        <span class=\\\"token comment\\\">//    ...</span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">TOP_MARGIN</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n        <span class=\\\"token comment\\\">//    ...</span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>item<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_LOADER</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n            <span class=\\\"token comment\\\">// 菊花</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">style</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>style<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n                </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">FeedLoader</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">FeedLoader</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\"> \\n            </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> areEqual<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 计算行高</span>\\n<span class=\\\"token function-variable function\\\">getItemSize</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">index</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> row <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>rowData<span class=\\\"token punctuation\\\">[</span>index<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>row <span class=\\\"token keyword\\\">instanceof</span> <span class=\\\"token class-name\\\">Array</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">16.44</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">*</span> window<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'remBase'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>row<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_SUBJECT</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2.75</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1.5</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">*</span> window<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'remBase'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>row<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">TOP_MARGIN</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">1.5</span> <span class=\\\"token operator\\\">*</span> window<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'remBase'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>row<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token constant\\\">ELEMENT_TYPES</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FEED_LOADER</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token number\\\">4.4</span> <span class=\\\"token operator\\\">*</span> window<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'remBase'</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <h4 {...{\n      \"id\": \"菊花组件\"\n    }}>{`菊花组件`}</h4>\n    <p>{`由于虚拟渲染天生基于观察者模式，因此菊花可以在 didMount 时候发起网络请求。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">FeedLoader</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">PureComponent</span><span class=\\\"token operator\\\">&lt;</span>Props<span class=\\\"token punctuation\\\">,</span> State<span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n    state<span class=\\\"token punctuation\\\">:</span> State<span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">static</span> defaultProps <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">BottomLoading</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function\\\">componentDidMount</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'FeedLoader fetching data::'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">loadMore</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    <span class=\\\"token function-variable function\\\">loadMore</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        HomeControl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">loadMore</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 发起网络请求</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> FeedLoader<span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`但这样做存在一个问题，在顺序加载过一次list项目之后，菊花的行高会被缓存在itemMetadataMap（offset，size）中。这使得我们后来数据到达之后将菊花替换成feeditem之后所占用的行高没有改变，造成样式重叠。 `}</p>\n    <p>{`具体可以通过研究源码得知整个渲染的顺序如下：`}</p>\n    <ol>\n      <li parentName=\"ol\">{`GetRowData：获取list数据`}</li>\n      <li parentName=\"ol\">{`GetItemSize：预分配行高（立即缓存）`}</li>\n      <li parentName=\"ol\">{`RenderRow：渲染行元素`}</li>\n    </ol>\n    <p>{`因此，我们可以在新数据插入之后，重置菊花位置的高度`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\",\n        \"data-language\": \"jsx\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>listEl<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">resetAfterIndex</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>rowData<span class=\\\"token punctuation\\\">.</span>length <span class=\\\"token operator\\\">-</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\"\n        }\n      }}></code></pre>\n    <h2 {...{\n      \"id\": \"优先加载\"\n    }}>{`优先加载`}</h2>\n    <h3 {...{\n      \"id\": \"问题描述\"\n    }}>{`问题描述`}</h3>\n    <p>{`浏览器并发连接数限制，在正常顺序加载的模式下，用户可能滑动了一屏，会等很久才刷出图，造成用户体验较差。`}</p>\n    <h3 {...{\n      \"id\": \"方案原理\"\n    }}>{`方案原理`}</h3>\n    <p>{`1.用户看到图片占位图，开始加载。 `}</p>\n    <p>{`2.图片还没加载完，就超出可见区域，抛弃。`}</p>\n    <h3 {...{\n      \"id\": \"如何正确抛弃\"\n    }}>{`如何正确抛弃`}</h3>\n    <p>{`1.一个图片在 set 了 src 之后，一旦开始，则无法结束（即使是将图片从 DOM 中移除，网络连接也并不会立刻断开）。\n需要更为激进的策略，即将图片的 src 置空，从而抛弃未完成加载的图片。 `}</p>\n    <p>{`2.可见性管理+图片加载的生命周期管理`}</p>\n    <p>{`由于懒加载组件用了 react-lazy-load-image-component，然后在 Github 上有同学提了功能需求的`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/Aljullu/react-lazy-load-image-component/issues/76\"\n      }}>{`issue`}</a>{`，然后我`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/mzvast/react-lazy-load-image-component/commit/870fa9abd9219b670d7e70fe60a1d86c02115107\"\n      }}>{`魔改了一下`}</a></p>\n    <h3 {...{\n      \"id\": \"还可以改进的地方\"\n    }}>{`还可以改进的地方`}</h3>\n    <p>{`可以知道，react-window中渲染过的元素进行过一次高度计算后，就会缓存，所以在window进行resize的时候，需要重新计算高度。因为产品场景没有这方面需求，所以没做，但从理论上是有考虑的。`}</p>\n    <h2 {...{\n      \"id\": \"总结\"\n    }}>{`总结`}</h2>\n    <h3 {...{\n      \"id\": \"对于问题\"\n    }}>{`对于问题`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`搞清楚问题是什么`}</li>\n      <li parentName=\"ul\">{`分清楚主要问题和次要问题`}</li>\n      <li parentName=\"ul\">{`问题的主要方面和次要方面`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"对于某个具体技术\"\n    }}>{`对于某个具体技术`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`掌握原理（文档/源码）`}</li>\n      <li parentName=\"ul\">{`搞清数据结构关系`}</li>\n      <li parentName=\"ul\">{`优先使用第三方/开源产品`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\"><em parentName=\"strong\">{`自己的贡献`}</em></strong></li>\n    </ul>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"你可以从本文了解到以下方面的优化思路\",\n    level: 2,\n    title: \"你可以从本文了解到以下方面的优化思路\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"背景\",\n    level: 2,\n    title: \"背景\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"优化策略\",\n    level: 2,\n    title: \"优化策略\",\n    children: [\n        {\n              id: \"图片\",\n              level: 3,\n              title: \"图片\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"字体\",\n              level: 3,\n              title: \"字体\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  },\n{\n    id: \"长列表\",\n    level: 2,\n    title: \"长列表\",\n    children: [\n        {\n              id: \"虚拟渲染-原理\",\n              level: 3,\n              title: \"虚拟渲染-原理\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  },\n{\n    id: \"优先加载\",\n    level: 2,\n    title: \"优先加载\",\n    children: [\n        {\n              id: \"问题描述\",\n              level: 3,\n              title: \"问题描述\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"方案原理\",\n              level: 3,\n              title: \"方案原理\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"如何正确抛弃\",\n              level: 3,\n              title: \"如何正确抛弃\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"还可以改进的地方\",\n              level: 3,\n              title: \"还可以改进的地方\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  },\n{\n    id: \"总结\",\n    level: 2,\n    title: \"总结\",\n    children: [\n        {\n              id: \"对于问题\",\n              level: 3,\n              title: \"对于问题\",\n              children: [\n                      \n                    ]\n            },\n      {\n              id: \"对于某个具体技术\",\n              level: 3,\n              title: \"对于某个具体技术\",\n              children: [\n                      \n                    ]\n            }\n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","module.exports = __webpack_public_path__ + \"static/media/bg.b5fc6c50.png\";","module.exports = __webpack_public_path__ + \"static/media/longlist.c61a41b9.png\";"],"sourceRoot":""}