(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{441:function(n,s,a){"use strict";a.r(s),a.d(s,"readingTime",function(){return p}),a.d(s,"default",function(){return o}),a.d(s,"tableOfContents",function(){return i}),a.d(s,"frontMatter",function(){return u});var t=a(32),e=(a(0),a(44)),p={text:"3 min read",minutes:2.35,time:141e3,words:470},c={},l="wrapper";function o(n){var s=n.components,a=Object(t.a)(n,["components"]);return Object(e.b)(l,Object.assign({},c,a,{components:s,mdxType:"MDXLayout"}),Object(e.b)("h2",{id:"\u5982\u4f55\u6109\u5feb\u7684\u8c03\u8bd5react"},"\u5982\u4f55\u6109\u5feb\u7684\u8c03\u8bd5react"),Object(e.b)("p",null,"React\u662f\u4e00\u4e2ahuge code base\u3002\u7814\u7a76\u5b83\uff0c\u6709\u8bb8\u591a\u65b9\u6cd5\u3002\u6211\u5e0c\u671b\u53ef\u4ee5\u4e00\u8fb9\u5f00\u7740\u4e00\u4e2aapp\uff08SPA\uff1f\uff09\uff0c\u8fd9\u4e2aapp\u5f15\u5165\u4e00\u4e2a\u672c\u5730\u7684react\uff0c\u5728\u91cc\u9762\u641e\u4e8b\u60c5\uff0c\u5e76\u53ef\u4ee5\u5b9e\u65f6\u770b\u5230\u6548\u679c\u3002"),Object(e.b)("p",null,"\u601d\u8def\u4e3b\u8981\u662f\u5728\u4e8e\u4e24\u7aef\uff08app\u7aef\u548cstore\u7aef\uff09\u5982\u4f55\u94fe\u63a5\u8d77\u6765\u3002"),Object(e.b)("h3",{id:"\u539f\u6709\u65b9\u6848\uff1astore\u7aefpush\uff0capp\u7aefpull"},"\u539f\u6709\u65b9\u6848\uff1astore\u7aefpush\uff0capp\u7aefpull"),Object(e.b)("p",null,"\u6211\u5728\u4e4b\u524d\u4e3b\u8981\u7528yalc\u6539\u5305\u53d1\u5e03\u5230\u672c\u5730store\uff0capp\u5f15\u5165yalc\u7684store\u4e2d\u7684react\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\u5b8c\u5168\u4e0d\u9700\u8981\u4fee\u6539app\u7f16\u8bd1\u7684\u8fc7\u7a0b\uff0c\u4f46\u662fbuild\uff0cpush package\uff0cpull package\uff0cpull\uff0crestart\uff0crestart \u76844\u6b65\u8d70\u8fc7\u7a0b\u5e76\u7b97\u4e0d\u4e0a\u53cb\u597d\u3002\uff08\u53ea\u9002\u7528\u4e8e\u7b80\u5355\u7684\u8c03\u8bd5\uff0c\u9891\u7e41\u7684\u4fee\u6539\u4f1ashi\u7684\uff09"),Object(e.b)("h3",{id:"\u65b0\u65b9\u6848\uff1a\u6574\u5408package\u5230app\u7aef\uff0clive-reload"},"\u65b0\u65b9\u6848\uff1a\u6574\u5408package\u5230app\u7aef\uff0clive-reload"),Object(e.b)("p",null,"\u5982\u679c\u4fee\u6539webpack\u6253\u5305\u8fc7\u7a0b\uff0c\u8ba9app\u8bc6\u522b\u8fd9\u4e00\u4e2apackage\u526f\u672c\uff08webpack alias\uff09\uff0c\u5e76\u501f\u52a9hmr\u80fd\u529b\uff0c\u4f7f\u5f97\u4fee\u6539\u6e90\u7801\u53ef\u4ee5\u5b9e\u65f6\u751f\u6548\u3002\u5c82\u4e0d\u662f\u5f88\u7f8e\uff1f\u5f53\u7136\uff0c\u8fd9\u4e5f\u5e76\u4e0d\u662f\u4ec0\u4e48\u65b0\u6280\u672f\uff0c\u53ea\u662f\u6574\u5408\u4e00\u4e0b\u5df2\u6709\u7684\u6280\u672f\u3002"),Object(e.b)("h2",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),Object(e.b)("h3",{id:"step1-base"},"Step1 Base"),Object(e.b)("p",null,"\u9996\u5148\u9700\u8981\u4e00\u4e2asolid\u7684\u57fa\u7840\uff0c\u6beb\u65e0\u7591\u95ee\uff0c\u9009\u62e9\u6700\u65b0\u7248CRA\uff0c\u5e76\u4e14eject\u3002"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'npx create-react-app debug-react-ts --template typescript\n<span class="token builtin class-name">cd</span> debug-react-ts\n<span class="token function">yarn</span> run <span class="token function">eject</span>\n'}}))),Object(e.b)("h3",{id:"step2-\u4e0b\u8f7d\u6e90\u7801\uff0c\u9b54\u6539config"},"Step2 \u4e0b\u8f7d\u6e90\u7801\uff0c\u9b54\u6539config"),Object(e.b)("p",null,"\u9996\u5148\u4e0b\u8f7dReact\u6e90\u7801\uff08\u5efa\u8bae17\uff09\uff0c\u653e\u5165src\u76ee\u5f55\u4e0b\u3002"),Object(e.b)("p",null,"\u7136\u540e\u51c6\u5907\u4fee\u6539",Object(e.b)("inlineCode",{parentName:"p"},"config/webpack.config.js"),"\u6587\u4ef6\u3002"),Object(e.b)("p",null,"\u5168\u6587\u641c\u7d22alias\uff0c\u8be5\u90e8\u5206\u5185\u5bb9\u66ff\u6362\u6210\u5982\u4e0b\uff1a"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'      alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n<span class="highlighted-line">        react<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../src/react/packages/react"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        <span class="token string">"react-dom"</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../src/react/packages/react-dom"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        <span class="token string">"legacy-events"</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span></span><span class="highlighted-line">          __dirname<span class="token punctuation">,</span></span><span class="highlighted-line">          <span class="token string">"../src/react/packages/legacy-events"</span></span><span class="highlighted-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        shared<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../src/react/packages/shared"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        <span class="token string">"react-reconciler"</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span></span><span class="highlighted-line">          __dirname<span class="token punctuation">,</span></span><span class="highlighted-line">          <span class="token string">"../src/react/packages/react-reconciler"</span></span><span class="highlighted-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        <span class="token string">"react-events"</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../src/react/packages/events"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span><span class="highlighted-line">        scheduler<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../src/react/packages/scheduler"</span><span class="token punctuation">)</span></span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n'}}))),Object(e.b)("p",null,"\u63a5\u7740\uff0c\u5982\u679cstart\u7684\u8bdd\u4f1a\u62a5\u9519\uff0c\u5927\u81f4\u610f\u601d\u662freact\u7684\u6e90\u7801\u91cc\u9762\u6709flow\u7684\u8bed\u6cd5\uff0cts\u4e0d\u8ba4\u8bc6\u3002\u6211\u4eec\u53ea\u8981\u5b89\u88c5\u63d2\u4ef6\u5ffd\u7565\u6389\u8fd9\u4e2a\u95ee\u9898\u5373\u53ef\u3002"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token function">yarn</span> <span class="token function">add</span> -D @babel/plugin-transform-flow-strip-types\n'}}))),Object(e.b)("p",null,"\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u52a0\u5165\u8fd9\u4e2a\u63d2\u4ef6"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx","data-language":"tsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n            <span class="token punctuation">[</span>\n            <span class="token keyword">require</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'babel-plugin-named-asset-import\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n                loaderMap<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n                svg<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n                    ReactComponent<span class="token punctuation">:</span>\n                    <span class="token string">\'@svgr/webpack?-svgo,+titleProp,+ref![path]\'</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="highlighted-line">            <span class="token punctuation">[</span><span class="token keyword">require</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"@babel/plugin-transform-flow-strip-types"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>            isEnvDevelopment <span class="token operator">&amp;&amp;</span>\n            shouldUseReactRefresh <span class="token operator">&amp;&amp;</span>\n            <span class="token keyword">require</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'react-refresh/babel\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">,</span>\n'}}))),Object(e.b)("h3",{id:"step3-\u4fee\u590d\u62a5\u9519"},"Step3 \u4fee\u590d\u62a5\u9519"),Object(e.b)("p",null,"run\u8d77\u6765\uff0c\u53ef\u4ee5\u770b\u5230\u62a5\u9519"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'Failed to compile.\n\n./src/react/packages/react-reconciler/src/ReactFiberCommitWork.js\nAttempted <span class="token function">import</span> error: <span class="token string">\'appendChild\'</span> is not exported from <span class="token string">\'./ReactFiberHostConfig\'</span><span class="token builtin class-name">.</span>\n'}}))),Object(e.b)("p",null,"\u627e\u5230",Object(e.b)("inlineCode",{parentName:"p"},"src/react/packages/react-reconciler/src/ReactFiberHostConfig.js"),"\u6587\u4ef6\uff0c\u4fee\u6539\u5982\u4e0b\uff1a"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="highlighted-line"><span class="token comment">// invariant(false, \'This module must be shimmed by a specific renderer.\');</span></span><span class="highlighted-line"><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./forks/ReactFiberHostConfig.dom"</span><span class="token punctuation">;</span></span>'}}))),Object(e.b)("p",null,"\u63a5\u7740\u4f1a\u770b\u5230\u62a5\u9519"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'./src/react/packages/react-reconciler/src/ReactFiberWorkLoop.old.js\nAttempted <span class="token function">import</span> error: <span class="token string">\'unstable_flushAllWithoutAsserting\'</span> is not exported from <span class="token string">\'scheduler\'</span> <span class="token punctuation">(</span>imported as <span class="token string">\'Scheduler\'</span><span class="token punctuation">)</span>.\n'}}))),Object(e.b)("p",null,"\u627e\u5230"),Object(e.b)("p",null,"\u6587\u4ef6",Object(e.b)("inlineCode",{parentName:"p"},"src/react/packages/scheduler/index.js"),"\u589e\u52a0\u5185\u5bb9"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token string">\'use strict\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">\'./src/Scheduler\'</span><span class="token punctuation">;</span>\n<span class="highlighted-line"><span class="token keyword">export</span> <span class="token punctuation">{</span></span><span class="highlighted-line">    unstable_flushAllWithoutAsserting<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_flushNumberOfYields<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_flushExpired<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_clearYields<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_flushUntilNextPaint<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_flushAll<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_yieldValue<span class="token punctuation">,</span></span><span class="highlighted-line">    unstable_advanceTime</span><span class="highlighted-line">  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./src/SchedulerHostConfig.js\'</span><span class="token punctuation">;</span></span>'}}))),Object(e.b)("p",null,"\u518d\u5728",Object(e.b)("inlineCode",{parentName:"p"},"src/react/packages/scheduler/src/SchedulerHostConfig.js"),"\u4fee\u6539\u5e76\u589e\u52a0\u5185\u5bb9"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="highlighted-line"><span class="token comment">// throw new Error(\'This module must be shimmed by a specific build.\');</span></span><span class="highlighted-line"><span class="token keyword">export</span> <span class="token punctuation">{</span></span><span class="highlighted-line">  unstable_flushAllWithoutAsserting<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_flushNumberOfYields<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_flushExpired<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_clearYields<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_flushUntilNextPaint<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_flushAll<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_yieldValue<span class="token punctuation">,</span></span><span class="highlighted-line">  unstable_advanceTime</span><span class="highlighted-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./forks/SchedulerHostConfig.mock.js"</span><span class="token punctuation">;</span></span><span class="highlighted-line"></span><span class="highlighted-line"><span class="token keyword">export</span> <span class="token punctuation">{</span></span><span class="highlighted-line">  requestHostCallback<span class="token punctuation">,</span></span><span class="highlighted-line">  requestHostTimeout<span class="token punctuation">,</span></span><span class="highlighted-line">  cancelHostTimeout<span class="token punctuation">,</span></span><span class="highlighted-line">  shouldYieldToHost<span class="token punctuation">,</span></span><span class="highlighted-line">  getCurrentTime<span class="token punctuation">,</span></span><span class="highlighted-line">  forceFrameRate<span class="token punctuation">,</span></span><span class="highlighted-line">  requestPaint</span><span class="highlighted-line"><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./forks/SchedulerHostConfig.default.js"</span><span class="token punctuation">;</span></span>'}}))),Object(e.b)("p",null,"\u7136\u540ecli\u91cc\u9762\u4e0d\u62a5\u9519\u4e86\uff0c\u4f46\u662fbrowser\u91cc\u9762\u62a5\u9519"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'ReferenceError: __DEV__ is not defined\nModule.<span class="token operator">&lt;</span>anonymous<span class="token operator">></span>\nsrc/react/packages/react/src/ReactBaseClasses.js:13\n'}}))),Object(e.b)("p",null,"\u627e\u5230",Object(e.b)("inlineCode",{parentName:"p"},"config/env.js"),"\uff0c\u5728\u672b\u5c3e\u4fee\u6539"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token comment">// Stringify all values so we can feed into webpack DefinePlugin</span>\n  <span class="token keyword">const</span> stringified <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token string">\'process.env\'</span><span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>raw<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      env<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>raw<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> env<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="highlighted-line">    __DEV__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//true,</span></span><span class="highlighted-line">    __PROFILE__<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true,</span></span><span class="highlighted-line">    __UMD__<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="highlighted-line">    __EXPERIMENTAL__<span class="token punctuation">:</span> <span class="token boolean">true</span></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n'}}))),Object(e.b)("p",null,"\u53ef\u4ee5\u770b\u5230\u53c8\u62a5\u9519\u4e86\uff0c"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'TypeError: Cannot destructure property <span class="token string">\'ReactCurrentDispatcher\'</span> of <span class="token string">\'shared_ReactSharedInternals__WEBPACK_IMPORTED_MODULE_3__.default\'</span> as it is undefined.\nModule.<span class="token operator">&lt;</span>anonymous<span class="token operator">></span>\nsrc/react/packages/shared/ReactComponentStackFrame.js:28\n'}}))),Object(e.b)("p",null,"\u4fee\u6539",Object(e.b)("inlineCode",{parentName:"p"},"src/react/packages/shared/ReactSharedInternals.js"),"\u6587\u4ef6\uff0c"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="highlighted-line"><span class="token comment">// const ReactSharedInternals =</span></span><span class="highlighted-line"><span class="token comment">//   React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;</span></span><span class="highlighted-line"><span class="token keyword">import</span> ReactSharedInternals <span class="token keyword">from</span> <span class="token string">"../react/src/ReactSharedInternals"</span><span class="token punctuation">;</span></span><span class="token keyword">export</span> <span class="token keyword">default</span> ReactSharedInternals<span class="token punctuation">;</span>\n'}}))),Object(e.b)("p",null,"\u7136\u540e\u53c8\u62a5\u9519\u60f9\uff01"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-bash","data-language":"bash","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'\xd7\nError: Internal React error: invariant<span class="token punctuation">(</span><span class="token punctuation">)</span> is meant to be replaced at compile time. There is no runtime version.\n'}}))),Object(e.b)("p",null,"\u4fee\u6539",Object(e.b)("inlineCode",{parentName:"p"},"src/react/packages/shared/invariant.js"),"\u6587\u4ef6"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">invariant</span><span class="token punctuation">(</span><span class="token parameter">condition<span class="token punctuation">,</span> format<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="highlighted-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>\n    <span class="token string">\'Internal React error: invariant() is meant to be replaced at compile \'</span> <span class="token operator">+</span>\n      <span class="token string">\'time. There is no runtime version.\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n'}}))),Object(e.b)("h3",{id:"linter\u914d\u7f6e\u4fee\u6539"},"linter\u914d\u7f6e\u4fee\u6539"),Object(e.b)("p",null,"\u9996\u5148eslint\u4f1a\u62a5\u9519\uff0c\u8bf4react\u7684\u5305\u4e2dfbjs\u7684eslint-config\u4e0d\u5b58\u5728\uff0c\u6211\u4eec\u8ba9eslint\u5ffd\u7565\u6389",Object(e.b)("inlineCode",{parentName:"p"},"src/react"),"\u5c31\u884c\u3002"),Object(e.b)("p",null,"\u65b0\u589e",Object(e.b)("inlineCode",{parentName:"p"},".eslintignore")),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="highlighted-line">src<span class="token operator">/</span>react</span>'}}))),Object(e.b)("p",null,"\u4fee\u6539",Object(e.b)("inlineCode",{parentName:"p"},"tsconfig.json"),"\uff0c\u6392\u9664\u6389react\u4ee3\u7801"),Object(e.b)("pre",null,Object(e.b)("code",Object.assign({parentName:"pre"},{className:"language-json","data-language":"json","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token punctuation">{</span>\n  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>\n    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">"dom"</span><span class="token punctuation">,</span>\n      <span class="token string">"dom.iterable"</span><span class="token punctuation">,</span>\n      <span class="token string">"esnext"</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token property">"allowJs"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"skipLibCheck"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"allowSyntheticDefaultImports"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token property">"forceConsistentCasingInFileNames"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"noFallthroughCasesInSwitch"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span>\n    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>\n    <span class="token property">"resolveJsonModule"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"isolatedModules"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"src"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="highlighted-line">  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><span class="highlighted-line">    <span class="token string">"src/react"</span></span><span class="highlighted-line">  <span class="token punctuation">]</span></span><span class="token punctuation">}</span>\n'}}))),Object(e.b)("h2",{id:"\u603b\u7ed3\u548c\u6700\u7ec8\u4ee3\u7801"},"\u603b\u7ed3\u548c\u6700\u7ec8\u4ee3\u7801"),Object(e.b)("p",null,"\u5b8c\u6210\u4e86\u8fd9\u4e9b\u8bbe\u5b9a\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u7684\u5728app\u91cc\u73a9react\u7684\u6e90\u7801\u5566\uff5e"),Object(e.b)("p",null,"\u5de5\u7a0b\u7684\u4ee3\u7801\u5728",Object(e.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/mzvast/debug-react-ts"}),"github")))}o.isMDXComponent=!0;var i=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"\u5982\u4f55\u6109\u5feb\u7684\u8c03\u8bd5react",level:2,title:"\u5982\u4f55\u6109\u5feb\u7684\u8c03\u8bd5react",children:[{id:"\u539f\u6709\u65b9\u6848\uff1astore\u7aefpush\uff0capp\u7aefpull",level:3,title:"\u539f\u6709\u65b9\u6848\uff1astore\u7aefpush\uff0capp\u7aefpull",children:[]},{id:"\u65b0\u65b9\u6848\uff1a\u6574\u5408package\u5230app\u7aef\uff0clive-reload",level:3,title:"\u65b0\u65b9\u6848\uff1a\u6574\u5408package\u5230app\u7aef\uff0clive-reload",children:[]}]},{id:"\u5b9e\u73b0",level:2,title:"\u5b9e\u73b0",children:[{id:"step1-base",level:3,title:"Step1 Base",children:[]},{id:"step2-\u4e0b\u8f7d\u6e90\u7801\uff0c\u9b54\u6539config",level:3,title:"Step2 \u4e0b\u8f7d\u6e90\u7801\uff0c\u9b54\u6539config",children:[]},{id:"step3-\u4fee\u590d\u62a5\u9519",level:3,title:"Step3 \u4fee\u590d\u62a5\u9519",children:[]},{id:"linter\u914d\u7f6e\u4fee\u6539",level:3,title:"linter\u914d\u7f6e\u4fee\u6539",children:[]}]},{id:"\u603b\u7ed3\u548c\u6700\u7ec8\u4ee3\u7801",level:2,title:"\u603b\u7ed3\u548c\u6700\u7ec8\u4ee3\u7801",children:[]}]},u={}}}]);
//# sourceMappingURL=117.9286ad30.chunk.js.map